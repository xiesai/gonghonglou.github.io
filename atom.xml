<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>与佳期的个人博客</title>
  <subtitle>登白薠兮骋望，与佳期兮夕张。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://gonghonglou.com/"/>
  <updated>2016-08-24T09:45:56.000Z</updated>
  <id>http://gonghonglou.com/</id>
  
  <author>
    <name>与佳期</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>iOS中关于二维码的识别与生成</title>
    <link href="http://gonghonglou.com/2016/07/24/QRCode/"/>
    <id>http://gonghonglou.com/2016/07/24/QRCode/</id>
    <published>2016-07-24T07:44:57.000Z</published>
    <updated>2016-08-24T09:45:56.000Z</updated>
    
    <content type="html">&lt;p&gt;提起二维码 &lt;a href=&quot;https://en.wikipedia.org/wiki/QR_code&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;QR Code&lt;/a&gt; 想必大家都不再陌生，“扫一扫加好友”、“扫一扫付款”等已是我们日常生活中司空见惯的情形。   &lt;/p&gt;
&lt;p&gt;以这篇博客来讲述在iOS中关于二维码的识别与生成，会尽可能周全的将二维码识别与生成相关的操作讲述清楚。&lt;/p&gt;
&lt;p&gt;关于二维码生成的原理，感兴趣的话各位可以移驾 &lt;a href=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/QRCode/mineqrcode.jpeg&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;二维码的生成细节和原理&lt;/a&gt; 以做参考。&lt;/p&gt;
&lt;p&gt;注：文中识别与生成二维码的方法同样适用于条形码。&lt;/p&gt;
&lt;p&gt;先上几张二维码压压惊……&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/QRCode/creatcode.png&quot; alt=&quot;我的二维码&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;识别二维码&quot;&gt;&lt;a href=&quot;#识别二维码&quot; class=&quot;headerlink&quot; title=&quot;识别二维码&quot;&gt;&lt;/a&gt;识别二维码&lt;/h1&gt;&lt;h2 id=&quot;摄像头扫描二维码&quot;&gt;&lt;a href=&quot;#摄像头扫描二维码&quot; class=&quot;headerlink&quot; title=&quot;摄像头扫描二维码&quot;&gt;&lt;/a&gt;摄像头扫描二维码&lt;/h2&gt;&lt;p&gt;iOS7之后苹果推出系统原生API来支持通过扫描获取二维码的功能，较其它 &lt;a href=&quot;https://github.com/ZBar/ZBar&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ZBar&lt;/a&gt;、&lt;a href=&quot;https://github.com/zxing/zxing&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ZXing&lt;/a&gt; 等第三方库有明显的性能优势。&lt;/p&gt;
&lt;p&gt;首先，你需要弄清楚要用到的以下对象分别起到什么作用：&lt;/p&gt;
&lt;p&gt;1、 &lt;code&gt;AVCaptureDevice&lt;/code&gt;：&lt;br&gt;捕获数据的物理设备，如：摄像机、麦克风。 开关灯属性&lt;code&gt;torchMode&lt;/code&gt;就是由它管理的。&lt;/p&gt;
&lt;p&gt;2、 &lt;code&gt;AVCaptureSession&lt;/code&gt;：&lt;br&gt;会话，管理输入流、输出流之间的数据传递。&lt;/p&gt;
&lt;p&gt;3、 &lt;code&gt;AVCaptureDeviceInput&lt;/code&gt;：&lt;br&gt;输入流，从物理设备获取数据。&lt;/p&gt;
&lt;p&gt;4、 &lt;code&gt;AVCaptureMetadataOutput&lt;/code&gt;：&lt;br&gt;输出流，需要设置输出流代理及所在线程，由代理对象处理输出流数据。     &lt;/p&gt;
&lt;p&gt;需要说明的是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;需要将输出流添加到会话后，才能指定元数据类型，否则会报错。&lt;/li&gt;
&lt;li&gt;将输出流设置在主线程中，其代理方法会执行一次。设置在其他线程的话，代理会执行多次且次数不可控制。&lt;/li&gt;
&lt;li&gt;可以通过设置&lt;code&gt;AVFoundation&lt;/code&gt;的&lt;code&gt;rectOfInterest&lt;/code&gt;属性来设定扫描区域，该属性默认取值是&lt;code&gt;CGRectMake(0, 0, 1, 1)&lt;/code&gt;即全屏扫描&lt;br&gt;&lt;code&gt;x&lt;/code&gt;、&lt;code&gt;y&lt;/code&gt;、&lt;code&gt;width&lt;/code&gt;、&lt;code&gt;height&lt;/code&gt;的取值范围都是&lt;code&gt;0～1&lt;/code&gt;，且原点在屏幕右上角，所以和我们正常理解的&lt;code&gt;CGRect&lt;/code&gt;相比&lt;code&gt;x&lt;/code&gt;和&lt;code&gt;y&lt;/code&gt;对调，&lt;code&gt;width&lt;/code&gt;和&lt;code&gt;height&lt;/code&gt;对调。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如图：&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/QRCode/rectOfInterest.jpeg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;5、 &lt;code&gt;AVCaptureVideoPreviewLayerCALayer&lt;/code&gt;：&lt;br&gt;预览图层，显示相机拍摄到的画面。正因为它是&lt;code&gt;CALayer&lt;/code&gt;的子类，为了将它添加到屏幕上，我们需要额外添加一个&lt;code&gt;UIView&lt;/code&gt;，在这个&lt;code&gt;UIView&lt;/code&gt;的&lt;code&gt;layer上&lt;/code&gt;添加&lt;code&gt;AVCaptureVideoPreviewLayerCALayer&lt;/code&gt;，否则它会覆盖住所有的控件（除非你把所有的控件都在添加这个视图之后添加）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/cheaptalk.png&quot; alt=&quot;&quot;&gt; &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;AVCaptureSession&lt;/code&gt; 设置开始与结束扫描&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 开始会话&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.captureSession startRunning];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 停止会话&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.captureSession stopRunning];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.captureSession = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;获取AVCaptureDevice实例&lt;/li&gt;
&lt;li&gt;初始化输入流&lt;/li&gt;
&lt;li&gt;初始化输出流&lt;br&gt; 3.1.设置代理及所在线程&lt;br&gt; 3.2设置扫描区域&lt;/li&gt;
&lt;li&gt;创建会话&lt;br&gt; 4.1添加输入流&lt;br&gt; 4.2添加输出流&lt;br&gt; *3.3指定元数据类型&lt;/li&gt;
&lt;li&gt;创建预览图层&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 1.获取AVCaptureDevice实例&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.captureDevice = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; defaultDeviceWithMediaType:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 2.初始化输入流&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; * error;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *input = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; deviceInputWithDevice:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.captureDevice error:&amp;amp;error];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!input) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;%@&quot;&lt;/span&gt;, [error localizedDescription]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 3.初始化输出流&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureMetadataOutput&lt;/span&gt; *captureMetadataOutput = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureMetadataOutput&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 3.1设置代理及所在线程&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[captureMetadataOutput setMetadataObjectsDelegate:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; queue:dispatch_get_main_queue()];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 3.2设置扫描区域&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[captureMetadataOutput setRectOfInterest:[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; scanPlace]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 4.创建会话&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.captureSession = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureSession&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 4.1添加输入流&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.captureSession addInput:input];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.captureSession canAddInput:input]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.captureSession addInput:input];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 4.2添加输出流&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.captureSession canAddOutput:captureMetadataOutput]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.captureSession addOutput:captureMetadataOutput];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 3.3指定元数据类型&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;captureMetadataOutput.metadataObjectTypes = @[&lt;span class=&quot;built_in&quot;&gt;AVMetadataObjectTypeUPCECode&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                             &lt;span class=&quot;built_in&quot;&gt;AVMetadataObjectTypeCode39Code&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                             &lt;span class=&quot;built_in&quot;&gt;AVMetadataObjectTypeCode39Mod43Code&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                             &lt;span class=&quot;built_in&quot;&gt;AVMetadataObjectTypeEAN13Code&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                             &lt;span class=&quot;built_in&quot;&gt;AVMetadataObjectTypeEAN8Code&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                             &lt;span class=&quot;built_in&quot;&gt;AVMetadataObjectTypeCode93Code&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                             &lt;span class=&quot;built_in&quot;&gt;AVMetadataObjectTypeCode128Code&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                             &lt;span class=&quot;built_in&quot;&gt;AVMetadataObjectTypePDF417Code&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                             &lt;span class=&quot;built_in&quot;&gt;AVMetadataObjectTypeQRCode&lt;/span&gt;, &lt;span class=&quot;comment&quot;&gt;// 二维码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                             &lt;span class=&quot;built_in&quot;&gt;AVMetadataObjectTypeAztecCode&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 5创建预览图层&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.captureVideoPreviewLayer = [[&lt;span class=&quot;built_in&quot;&gt;AVCaptureVideoPreviewLayer&lt;/span&gt; alloc] initWithSession:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.captureSession];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.captureVideoPreviewLayer setVideoGravity:&lt;span class=&quot;built_in&quot;&gt;AVLayerVideoGravityResizeAspectFill&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.captureVideoPreviewLayer setFrame:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.scanView.layer.bounds];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.scanView.layer addSublayer:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.captureVideoPreviewLayer];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;AVCaptureMetadataOutput&lt;/code&gt; 的代理方法处理输出流，返回扫描结果&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#pragma mark - 代理方法处理输出流&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)captureOutput:(&lt;span class=&quot;built_in&quot;&gt;AVCaptureOutput&lt;/span&gt; *)captureOutput didOutputMetadataObjects:(&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *)metadataObjects fromConnection:(&lt;span class=&quot;built_in&quot;&gt;AVCaptureConnection&lt;/span&gt; *)connection &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (metadataObjects != &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt; &amp;amp;&amp;amp; [metadataObjects count] &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;AVMetadataMachineReadableCodeObject&lt;/span&gt; *metadataObj = [metadataObjects objectAtIndex:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *result = metadataObj.stringValue;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;result:%@&quot;&lt;/span&gt;, result);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([[metadataObj type] isEqualToString:&lt;span class=&quot;built_in&quot;&gt;AVMetadataObjectTypeQRCode&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;二维码&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;comment&quot;&gt;// ...&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; closeScanQRCode];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;开灯&quot;&gt;&lt;a href=&quot;#开灯&quot; class=&quot;headerlink&quot; title=&quot;开灯&quot;&gt;&lt;/a&gt;开灯&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;给开关灯按钮调用以下 &lt;code&gt;AVCaptureDevice&lt;/code&gt; 方法，轻松实现开灯效果&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)turnLight &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;// 判断允许设置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.device hasTorch]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.device lockForConfiguration:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.device.torchMode == &lt;span class=&quot;built_in&quot;&gt;AVCaptureTorchModeOff&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.device setTorchMode:&lt;span class=&quot;built_in&quot;&gt;AVCaptureTorchModeOn&lt;/span&gt;]; &lt;span class=&quot;comment&quot;&gt;// 开灯&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.device.torchMode == &lt;span class=&quot;built_in&quot;&gt;AVCaptureTorchModeOn&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.device setTorchMode:&lt;span class=&quot;built_in&quot;&gt;AVCaptureTorchModeOff&lt;/span&gt;]; &lt;span class=&quot;comment&quot;&gt;// 关灯&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.device unlockForConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;总结下来就是：&lt;br&gt;&lt;code&gt;AVCaptureSession&lt;/code&gt;管理从物理设备&lt;code&gt;AVCaptureDevice&lt;/code&gt;那里获取的输入流&lt;code&gt;AVCaptureDeviceInput&lt;/code&gt;数据，通过输出流&lt;code&gt;AVCaptureMetadataOutput&lt;/code&gt;显示到预览图层&lt;code&gt;AVCaptureVideoPreviewLayerCALayer&lt;/code&gt;上，并且由代理方法&lt;code&gt;-(void)captureOutput:(AVCaptureOutput*)captureOutput didOutputMetadataObjects:(NSArray*)metadataObjects fromConnection:(AVCaptureConnection*)connection;&lt;/code&gt;处理捕获到的数据。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;相册识别二维码&quot;&gt;&lt;a href=&quot;#相册识别二维码&quot; class=&quot;headerlink&quot; title=&quot;相册识别二维码&quot;&gt;&lt;/a&gt;相册识别二维码&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;iOS8之后系统提供的识别二维码图片的方法相当简单&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 读取二维码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *sourceImage ＝ ...;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CIContext&lt;/span&gt; *context = [&lt;span class=&quot;built_in&quot;&gt;CIContext&lt;/span&gt; contextWithOptions:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CIDetector&lt;/span&gt; *detector = [&lt;span class=&quot;built_in&quot;&gt;CIDetector&lt;/span&gt; detectorOfType:&lt;span class=&quot;built_in&quot;&gt;CIDetectorTypeQRCode&lt;/span&gt; context:context options:@&amp;#123;&lt;span class=&quot;built_in&quot;&gt;CIDetectorAccuracy&lt;/span&gt;:&lt;span class=&quot;built_in&quot;&gt;CIDetectorAccuracyHigh&lt;/span&gt;&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CIImage&lt;/span&gt; *image = [&lt;span class=&quot;built_in&quot;&gt;CIImage&lt;/span&gt; imageWithCGImage:sourceImage.CGImage];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *array = [detector featuresInImage:image];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CIQRCodeFeature&lt;/span&gt; *feature = [array firstObject];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *result = feature.messageString;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;result:%@&quot;&lt;/span&gt;, result);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;UIImagePickerController&lt;/code&gt; 打开系统相册，选择图片识别：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)openPhotoLibrary &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;UIImagePickerController&lt;/span&gt; *photoPicker = [&lt;span class=&quot;built_in&quot;&gt;UIImagePickerController&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    photoPicker.delegate = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 打开的相册类型&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    photoPicker.sourceType = &lt;span class=&quot;built_in&quot;&gt;UIImagePickerControllerSourceTypePhotoLibrary&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; presentViewController:photoPicker animated:&lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt; completion:&lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;UIImagePickerController&lt;/code&gt; 的代理方法识别相册中选中的二维码：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#pragma mark - UIImagePickerControllerDelegate&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)imagePickerController:(&lt;span class=&quot;built_in&quot;&gt;UIImagePickerController&lt;/span&gt; *)picker didFinishPickingMediaWithInfo:(&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *)info &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; dismissViewControllerAnimated:&lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt; completion:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 读取二维码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *sourceImage = [info objectForKey:&lt;span class=&quot;built_in&quot;&gt;UIImagePickerControllerOriginalImage&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CIContext&lt;/span&gt; *context = [&lt;span class=&quot;built_in&quot;&gt;CIContext&lt;/span&gt; contextWithOptions:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CIDetector&lt;/span&gt; *detector = [&lt;span class=&quot;built_in&quot;&gt;CIDetector&lt;/span&gt; detectorOfType:&lt;span class=&quot;built_in&quot;&gt;CIDetectorTypeQRCode&lt;/span&gt; context:context options:@&amp;#123;&lt;span class=&quot;built_in&quot;&gt;CIDetectorAccuracy&lt;/span&gt;:&lt;span class=&quot;built_in&quot;&gt;CIDetectorAccuracyHigh&lt;/span&gt;&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CIImage&lt;/span&gt; *image = [&lt;span class=&quot;built_in&quot;&gt;CIImage&lt;/span&gt; imageWithCGImage:sourceImage.CGImage];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *array = [detector featuresInImage:image];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CIQRCodeFeature&lt;/span&gt; *feature = [array firstObject];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *result = feature.messageString;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;result:%@&quot;&lt;/span&gt;, result);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;生成二维码&quot;&gt;&lt;a href=&quot;#生成二维码&quot; class=&quot;headerlink&quot; title=&quot;生成二维码&quot;&gt;&lt;/a&gt;生成二维码&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;使用系统提供的&lt;code&gt;CIFilter&lt;/code&gt;可以方便简单的生成二维码&lt;/p&gt;
&lt;p&gt;生成二维码方法&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *)generateQRCode:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)code width:(&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt;)width height:(&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt;)height &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CIImage&lt;/span&gt; *qrcodeImage;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; *data = [code dataUsingEncoding:&lt;span class=&quot;built_in&quot;&gt;NSUTF8StringEncoding&lt;/span&gt; allowLossyConversion:&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CIFilter&lt;/span&gt; *filter = [&lt;span class=&quot;built_in&quot;&gt;CIFilter&lt;/span&gt; filterWithName:&lt;span class=&quot;string&quot;&gt;@&quot;CIQRCodeGenerator&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [filter setValue:data forKey:&lt;span class=&quot;string&quot;&gt;@&quot;inputMessage&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [filter setValue:&lt;span class=&quot;string&quot;&gt;@&quot;H&quot;&lt;/span&gt; forKey:&lt;span class=&quot;string&quot;&gt;@&quot;inputCorrectionLevel&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    qrcodeImage = [filter outputImage];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 消除模糊&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; scaleX = width / qrcodeImage.extent.size.width; &lt;span class=&quot;comment&quot;&gt;// extent 返回图片的frame&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; scaleY = height / qrcodeImage.extent.size.height;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CIImage&lt;/span&gt; *transformedImage = [qrcodeImage imageByApplyingTransform:&lt;span class=&quot;built_in&quot;&gt;CGAffineTransformScale&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;CGAffineTransformIdentity&lt;/span&gt;, scaleX, scaleY)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; imageWithCIImage:transformedImage];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;使用 &lt;code&gt;CIFilter&lt;/code&gt; 生成带背景色的二维码&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *)gaveColor:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)code width:(&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt;)width height:(&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt;)height &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; *data = [code dataUsingEncoding:&lt;span class=&quot;built_in&quot;&gt;NSUTF8StringEncoding&lt;/span&gt; allowLossyConversion:&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CIFilter&lt;/span&gt; *filter = [&lt;span class=&quot;built_in&quot;&gt;CIFilter&lt;/span&gt; filterWithName:&lt;span class=&quot;string&quot;&gt;@&quot;CIQRCodeGenerator&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [filter setValue:data forKey:&lt;span class=&quot;string&quot;&gt;@&quot;inputMessage&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [filter setValue:&lt;span class=&quot;string&quot;&gt;@&quot;H&quot;&lt;/span&gt; forKey:&lt;span class=&quot;string&quot;&gt;@&quot;inputCorrectionLevel&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//上色&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CIFilter&lt;/span&gt; *colorFilter = [&lt;span class=&quot;built_in&quot;&gt;CIFilter&lt;/span&gt; filterWithName:&lt;span class=&quot;string&quot;&gt;@&quot;CIFalseColor&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                       keysAndValues:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                             &lt;span class=&quot;string&quot;&gt;@&quot;inputImage&quot;&lt;/span&gt;,filter.outputImage,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                             &lt;span class=&quot;string&quot;&gt;@&quot;inputColor0&quot;&lt;/span&gt;,[&lt;span class=&quot;built_in&quot;&gt;CIColor&lt;/span&gt; colorWithCGColor:[&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; purpleColor].CGColor], &lt;span class=&quot;comment&quot;&gt;// 前景色&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                             &lt;span class=&quot;string&quot;&gt;@&quot;inputColor1&quot;&lt;/span&gt;,[&lt;span class=&quot;built_in&quot;&gt;CIColor&lt;/span&gt; colorWithCGColor:[&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; cyanColor].CGColor], &lt;span class=&quot;comment&quot;&gt;// 背景色&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                             &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CIImage&lt;/span&gt; *qrcodeImage = colorFilter.outputImage;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 消除模糊&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; scaleX = width / qrcodeImage.extent.size.width; &lt;span class=&quot;comment&quot;&gt;// extent 返回图片的frame&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; scaleY = height / qrcodeImage.extent.size.height;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CIImage&lt;/span&gt; *transformedImage = [qrcodeImage imageByApplyingTransform:&lt;span class=&quot;built_in&quot;&gt;CGAffineTransformScale&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;CGAffineTransformIdentity&lt;/span&gt;, scaleX, scaleY)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; imageWithCIImage:transformedImage];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;通过遍历图片的像素给二维码个性化上色  &lt;/p&gt;
&lt;p&gt;这里需要指出的是，如果你在下边方法中传入的 &lt;code&gt;image&lt;/code&gt; 是通过 &lt;code&gt;CIFilter&lt;/code&gt; 方法直接生成的，那么该方法是没法工作的。同理，下一节中保存图片时仍然不能用 &lt;code&gt;CIFilter&lt;/code&gt; 方法直接生成的 &lt;code&gt;image&lt;/code&gt;，而采用 &lt;code&gt;CGContextRef&lt;/code&gt; 获取图片。（参见下一节：&lt;strong&gt;保存二维码&lt;/strong&gt;）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 颜色变化&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; ProviderReleaseData (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *info, &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *data, size_t size) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    free((&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *)data);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *)imageBlackToTransparent:(&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *)image &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 分配内存&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; imageWidth = image.size.width;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; imageHeight = image.size.height;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    size_t bytesPerRow = imageWidth * &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    uint32_t *rgbImageBuf = (uint32_t *)malloc(bytesPerRow * imageHeight);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 创建context&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGColorSpaceRef&lt;/span&gt; colorSpace = &lt;span class=&quot;built_in&quot;&gt;CGColorSpaceCreateDeviceRGB&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextRef&lt;/span&gt; context = &lt;span class=&quot;built_in&quot;&gt;CGBitmapContextCreate&lt;/span&gt;(rgbImageBuf, imageWidth, imageHeight, &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;, bytesPerRow, colorSpace,kCGBitmapByteOrder32Little | kCGImageAlphaNoneSkipLast);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextDrawImage&lt;/span&gt;(context, &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, imageWidth, imageHeight), image.CGImage);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 遍历像素&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; pixelNum = imageWidth * imageHeight;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    uint32_t *pCurPtr = rgbImageBuf;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; pixelNum; i++, pCurPtr++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ((*pCurPtr &amp;amp; &lt;span class=&quot;number&quot;&gt;0xFFFFFF00&lt;/span&gt;) &amp;lt; &lt;span class=&quot;number&quot;&gt;0x99999900&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// 改变下面的代码，将图片转成想要的颜色&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            uint8_t *ptr = (uint8_t *)pCurPtr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (i&amp;lt;pixelNum/&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ptr[&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;//0~255&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ptr[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;200&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ptr[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;200&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ptr[&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;200&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;//0~255&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ptr[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ptr[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;200&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123; &lt;span class=&quot;comment&quot;&gt;// 白色 255,255,255&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            uint8_t *ptr = (uint8_t *)pCurPtr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ptr[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 将内存转成image&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGDataProviderRef&lt;/span&gt; dataProvider = &lt;span class=&quot;built_in&quot;&gt;CGDataProviderCreateWithData&lt;/span&gt;(&lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;, rgbImageBuf, bytesPerRow * imageHeight,ProviderReleaseData);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGImageRef&lt;/span&gt; imageRef = &lt;span class=&quot;built_in&quot;&gt;CGImageCreate&lt;/span&gt;(imageWidth, imageHeight, &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;32&lt;/span&gt;, bytesPerRow, colorSpace,kCGImageAlphaLast | kCGBitmapByteOrder32Little, dataProvider, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;, kCGRenderingIntentDefault);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGDataProviderRelease&lt;/span&gt;(dataProvider);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *resultUIImage = [&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; imageWithCGImage:imageRef];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 释放&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGImageRelease&lt;/span&gt;(imageRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextRelease&lt;/span&gt;(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGColorSpaceRelease&lt;/span&gt;(colorSpace);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; resultUIImage;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;生成条码图片&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *)generateBarCode:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)code width:(&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt;)width height:(&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt;)height &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CIImage&lt;/span&gt; *barcodeImage;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; *data = [code dataUsingEncoding:&lt;span class=&quot;built_in&quot;&gt;NSISOLatin1StringEncoding&lt;/span&gt; allowLossyConversion:&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CIFilter&lt;/span&gt; *filter = [&lt;span class=&quot;built_in&quot;&gt;CIFilter&lt;/span&gt; filterWithName:&lt;span class=&quot;string&quot;&gt;@&quot;CICode128BarcodeGenerator&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [filter setValue:data forKey:&lt;span class=&quot;string&quot;&gt;@&quot;inputMessage&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    barcodeImage = [filter outputImage];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 消除模糊&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; scaleX = width / barcodeImage.extent.size.width; &lt;span class=&quot;comment&quot;&gt;// extent 返回图片的frame&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; scaleY = height / barcodeImage.extent.size.height;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CIImage&lt;/span&gt; *transformedImage = [barcodeImage imageByApplyingTransform:&lt;span class=&quot;built_in&quot;&gt;CGAffineTransformScale&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;CGAffineTransformIdentity&lt;/span&gt;, scaleX, scaleY)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; imageWithCIImage:transformedImage];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;保存二维码&quot;&gt;&lt;a href=&quot;#保存二维码&quot; class=&quot;headerlink&quot; title=&quot;保存二维码&quot;&gt;&lt;/a&gt;保存二维码&lt;/h1&gt;&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 开启位图上下文&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIGraphicsBeginImageContextWithOptions&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.imageView.bounds.size, &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 获取绘图上下文&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextRef&lt;/span&gt; context = &lt;span class=&quot;built_in&quot;&gt;UIGraphicsGetCurrentContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 将图片渲染的上下文中&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.imageView.layer renderInContext:context];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 获取上下文中的图片&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *image = &lt;span class=&quot;built_in&quot;&gt;UIGraphicsGetImageFromCurrentImageContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 关闭位图上下文&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIGraphicsEndImageContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 保存图片&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIImageWriteToSavedPhotosAlbum&lt;/span&gt;(image, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(image:didFinishSavingWithError:contextInfo:), &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;UIImageWriteToSavedPhotosAlbum&lt;/code&gt; 方法的指定回调，监测保存是否成功&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#pragma mark -  指定回调方法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)image:(&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *)image didFinishSavingWithError:(&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *)error contextInfo:(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *)contextInfo &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *string;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(!error)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;save success&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;save failed&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;看一哈效果图&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/QRCode/QRCodeSacn.png&quot; alt=&quot;二维码的识别与生成&quot;&gt;&lt;/p&gt;
&lt;p&gt;ok，就这些吧。&lt;br&gt;Demo地址：&lt;a href=&quot;https://github.com/gonghonglou/QRCodeDemo&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/gonghonglou/QRCodeDemo&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;写到这里估计涉及了二维码操作的大部分内容，期望对诸君有所帮助。&lt;/p&gt;
&lt;p&gt;祝大家敲码愉快！&lt;/p&gt;
&lt;h1 id=&quot;后记&quot;&gt;&lt;a href=&quot;#后记&quot; class=&quot;headerlink&quot; title=&quot;后记&quot;&gt;&lt;/a&gt;后记&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;小白出手，请多指教。如言有误，还望斧正！&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;转载请保留原文地址&lt;a href=&quot;http://gonghonglou.com/2016/07/24/QRCode&quot;&gt;http://gonghonglou.com/2016/07/24/QRCode&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;提起二维码 &lt;a href=&quot;https://en.wikipedia.org/wiki/QR_code&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;QR Code&lt;/a&gt; 想必大家都不再陌生，“扫一扫加好友”、“扫一扫付款”等已是我们日常生活中司空见惯
    
    </summary>
    
      <category term="iOS" scheme="http://gonghonglou.com/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>丽江之行</title>
    <link href="http://gonghonglou.com/2016/05/19/lijiang/"/>
    <id>http://gonghonglou.com/2016/05/19/lijiang/</id>
    <published>2016-05-19T14:43:02.000Z</published>
    <updated>2016-07-05T02:39:22.000Z</updated>
    
    <content type="html">&lt;p&gt;本来就打算一场毕业旅行啊，只是因为没有找到小伙伴同行所以迟迟未定。&lt;br&gt;某日夜，Yu小Rong同学突出奇想打工换宿邀游丽江。&lt;br&gt;一拍而和！&lt;/p&gt;
&lt;p&gt;最初的想法是打工换宿二十天左右，然而丽江客栈招义工大都要女孩子啊。&lt;br&gt;搞不懂看看客栈家门而已喽，身强力壮的小伙子就这么受歧视吗。。。&lt;/p&gt;
&lt;p&gt;所以Yu小Rong同学顺利找到一家暖暖的客栈做义工，而我…放弃吗？&lt;br&gt;NO！&lt;br&gt;苦寻义工无果之后果断选择住宿青旅，也算穷游丽江啦！&lt;/p&gt;
&lt;p&gt;有意思的是在某团上订房间时某青旅有三种房间：混住房间、男生房间、女生房间，价格相同。&lt;br&gt;不明白该青旅是报以什么样的想法加入了混住房间的呢（坏笑）&lt;br&gt;当我把这件事告知Yu小Rong同学并得知我订的是男生房间而非混住房间时竟然吐槽我：注孤生！&lt;br&gt;额，好像错过了什么，活该单身狗啊哈哈哈&lt;/p&gt;
&lt;h2 id=&quot;12号－－出发丽江&quot;&gt;&lt;a href=&quot;#12号－－出发丽江&quot; class=&quot;headerlink&quot; title=&quot;12号－－出发丽江&quot;&gt;&lt;/a&gt;12号－－出发丽江&lt;/h2&gt;&lt;p&gt;十点出门从浦东奔赴上海虹桥，十二点动车开往杭州，下午两点机场大巴从杭州东站开往萧山机场。六点四十起飞，时间还是挺充足的！&lt;/p&gt;
&lt;p&gt;萧山机场&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/airplane.jpeg&quot; alt=&quot;萧山机场&quot;&gt;&lt;/p&gt;
&lt;p&gt;三小时后三义机场和某个傻傻女孩&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/sanyiAirplane.jpeg&quot; alt=&quot;三义机场&quot;&gt;&lt;/p&gt;
&lt;p&gt;一翻奔波，安顿了Yu小Rong同学在客栈，然后赶到青旅已是十二点多。青旅虽说是六张床却是我一人住还是棒棒哒！可能现在是旅游淡季的缘故吧。&lt;/p&gt;
&lt;h2 id=&quot;13号－－束河古镇&quot;&gt;&lt;a href=&quot;#13号－－束河古镇&quot; class=&quot;headerlink&quot; title=&quot;13号－－束河古镇&quot;&gt;&lt;/a&gt;13号－－束河古镇&lt;/h2&gt;&lt;p&gt;今天是休闲的一天。而且感觉丽江是一个慢节奏的古镇，好多人来旅游度假，也有很多人来旅行休憩。相比上海的快节奏生活突然到这里还是有些稍稍不适应的，是那种没有从心底完全放松的感觉。不过好不容易来这一趟还是非常享受这里惬意、舒适、休闲的慢节奏生活的。想想有半月多的这种旅行生活还是蛮激动的😄&lt;/p&gt;
&lt;p&gt;早晨起来才看清住的院子的真面目，不错哦。&lt;br&gt; &lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/qinglv2.jpeg&quot; alt=&quot;客栈院子&quot;&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/qinglv3.jpeg&quot; alt=&quot;客栈院子&quot;&gt;&lt;/p&gt;
&lt;p&gt;上午就悠闲地待在小伙伴在的客栈里，大大的院子。&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/kezhan.jpeg&quot; alt=&quot;客栈院子&quot;&gt;&lt;/p&gt;
&lt;p&gt;午饭后漫步于束河古镇的各条街道里，房屋大多都是木质的&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/shuhe2.jpeg&quot; alt=&quot;&quot;&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/shuhe3.jpeg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;好多手鼓店，而且都放着那首由 &lt;a href=&quot;http://www.tudou.com/programs/view/99iuXqPqV2o/?bid=03&amp;amp;pid=2&amp;amp;resourceId=0_03_05_02&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;最美丽江手鼓女孩&lt;/a&gt; 火起来的欢快的《我的小宝贝》&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/WeChat_1463590780.jpeg&quot; alt=&quot;手鼓店&quot;&gt;&lt;/p&gt;
&lt;p&gt;回青旅休息的路上路过一家叫喜鹊的小酒吧，好像很热闹的样子，就到上边坐了一会。&lt;br&gt;深夜，点一杯饮料听几首歌……&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/jiuba.jpeg&quot; alt=&quot;喜鹊酒吧&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;14号－－拉市海&quot;&gt;&lt;a href=&quot;#14号－－拉市海&quot; class=&quot;headerlink&quot; title=&quot;14号－－拉市海&quot;&gt;&lt;/a&gt;14号－－拉市海&lt;/h2&gt;&lt;p&gt;在纳西族中，“拉”为荒坝，“市”为新。“拉市”意为新的荒坝。拉市海在当地人口中也称为老市海。&lt;br&gt;上午十点半包车前往拉市海马场，这边真的有好多马场，会有很多游客来骑马。这里的马个头比较矮，不过据马夫讲这里的马脚力特别好，擅负重。&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/P60514-115216.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;茶马古道上捕获软妹子一只，这么美好想上前搭讪呀😏&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/IMG_2891.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;中午到拉市海海上会所吃过午饭后就开始划船了嘛。可惜今天阴天，不然就能看到拉市海清澈美丽的湖面上倒映着蔚蓝的天空和天空里洁白的棉花糖  &lt;/p&gt;
&lt;p&gt;仗桨天涯！&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/WeChat_1463236839.jpeg&quot; alt=&quot;仗桨天涯&quot;&gt;&lt;/p&gt;
&lt;p&gt;美丽湖畔&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/IMG_3012.jpg&quot; alt=&quot;拉市海&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;15号－－雨&quot;&gt;&lt;a href=&quot;#15号－－雨&quot; class=&quot;headerlink&quot; title=&quot;15号－－雨&quot;&gt;&lt;/a&gt;15号－－雨&lt;/h2&gt;&lt;p&gt;一整天都在下雨，不知是因为还没适应丽江的慢节奏还是因为一个人的孤独，今天清晰的感觉到对这里 我没有归属感。美丽的丽江。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;－: I’m sorry.&lt;br&gt;－: For what?&lt;br&gt;－:&lt;br&gt;－: For this.You’re so beautiful,i can’t control myself.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;16号－－丽江古城&quot;&gt;&lt;a href=&quot;#16号－－丽江古城&quot; class=&quot;headerlink&quot; title=&quot;16号－－丽江古城&quot;&gt;&lt;/a&gt;16号－－丽江古城&lt;/h2&gt;&lt;p&gt;万幸今天没下雨，可以去古城逛一逛。来丽江已有几天了，今天才去古城玩了。尤其想去看看大冰的小屋。对于大冰，相比读者粉丝我想我更是《阳光快车道》的观众，那是儿时的记忆，每周六的精彩节目，陪伴大冰在《阳光快车道》里从外景主持人到节目扛把子😄&lt;/p&gt;
&lt;p&gt;丽江古城&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/IMG_3120.jpg&quot; alt=&quot;丽江古城&quot;&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/IMG_3094.jpg&quot; alt=&quot;&quot;&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/IMG_3131.jpg&quot; alt=&quot;大冰的小屋&quot;&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/IMG_3130.jpg&quot; alt=&quot;老兵火塘&quot;&gt;&lt;/p&gt;
&lt;p&gt;晚上回青旅路过没有名字的手鼓店，美美的老板娘 暖暖的土家族妹子。&lt;br&gt;待了好长时间，手鼓没打几下倒是聊了好久，基本都是老板娘在讲：&lt;br&gt;讲来丽江前做装修设计时的嗨翻生活；&lt;br&gt;讲妈妈没有文采却有道理的生意之道；&lt;br&gt;讲算是“前男友”的刻骨经历；&lt;br&gt;讲快要结婚的男朋友的习性和她们之间相识经历生活小事还有老板娘爱吃醋的小性子。&lt;br&gt;燕姐，一个有故事的手鼓老板娘，不由得让人感觉亲近。下文有照片哦～&lt;/p&gt;
&lt;h2 id=&quot;17号－－再游古城&quot;&gt;&lt;a href=&quot;#17号－－再游古城&quot; class=&quot;headerlink&quot; title=&quot;17号－－再游古城&quot;&gt;&lt;/a&gt;17号－－再游古城&lt;/h2&gt;&lt;p&gt;今天是个好天气，怎么舍得不出去。在丽江的这几天晴朗的天空就是最稀有美丽的风景。&lt;/p&gt;
&lt;p&gt;专门到大冰的小屋里去坐了坐，一瓶风花雪月，一下午。&lt;br&gt;小屋里都是来自五湖四海的朋友，而且大都是女孩子呢。&lt;br&gt;驻唱歌手问大家想听什么歌，大家点了一圈，他只答：不会、没听过。他说不点歌的，只是那么随口问问233，想起什么唱什么。&lt;br&gt;他想起了甜蜜蜜，大家鼓掌期待那首经典老歌，只是第二句便唱得小屋里的女孩们红透了脸，这个歌手好污😄&lt;br&gt;大多都是流浪歌手的民谣之类的歌曲，也好多他自己的原创歌曲。    &lt;/p&gt;
&lt;p&gt;一把吉他弹起，旁边手鼓伴奏，轻声慢语，辽亢高歌。&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/WeChat_1463640994.jpeg&quot; alt=&quot;&quot;&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/%E5%B0%8F%E5%B1%8B.jpeg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;丽江古城很大，昨天只逛了一部份而已。今天去的时候发现好多手鼓店里的女孩都贴别漂亮啊，所以忍不住挨个拍下照片，打算做一合辑，就叫 &lt;a href=&quot;http://m.weibo.cn/3126314295/3976265180470944&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;最美丽江手鼓女孩&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;18号－－束河鼓缘&quot;&gt;&lt;a href=&quot;#18号－－束河鼓缘&quot; class=&quot;headerlink&quot; title=&quot;18号－－束河鼓缘&quot;&gt;&lt;/a&gt;18号－－束河鼓缘&lt;/h2&gt;&lt;p&gt;原本是打算在这里待二十天左右的，奈何天天下雨还特别冷，加之Yu小Rong同学男票不来了，所以打算提前回去喽。&lt;/p&gt;
&lt;p&gt;因为好多地方没去，倒是剩下了许多费用，看到束河街道上好多手鼓店，买个手鼓玩玩也是极好的。其实已经在燕姐那看了好几天了，大概有了个相中的手鼓，在今天买定的。&lt;/p&gt;
&lt;p&gt;漂亮的老板娘－－燕姐：&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/%E7%87%95%E7%8E%B2.jpeg&quot; alt=&quot;燕姐&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;19号－－离开你时才爱上你&quot;&gt;&lt;a href=&quot;#19号－－离开你时才爱上你&quot; class=&quot;headerlink&quot; title=&quot;19号－－离开你时才爱上你&quot;&gt;&lt;/a&gt;19号－－离开你时才爱上你&lt;/h2&gt;&lt;p&gt;今天就要滚回上海了，恰好就在今天才是来丽江这么多天天气最好的一天。&lt;/p&gt;
&lt;p&gt;坐在机场大巴上，望着头顶上的广袤的蔚蓝的天空和那些大块大块的棉花糖简直美哭了&lt;br&gt;远方的雪山美的心都要化了&lt;br&gt;来丽江这么久从没像这一刻觉得丽江原来可以这么美。&lt;br&gt;可惜了了手机并不能拍出那样的美景。&lt;/p&gt;
&lt;p&gt;美丽的天空，美的都不舍得离开了。 &lt;/p&gt;
&lt;p&gt;当离开你时，才发现爱上了你。&lt;br&gt;－－－－丽江。&lt;/p&gt;
&lt;p&gt;最后附束河傍晚天空图一张&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/IMG_3314.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;最后的最后分享阳光下的小花一组：(拍摄者：Yu小Rong)&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/IMG_3335.jpg&quot; alt=&quot;&quot;&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/IMG_3337.jpg&quot; alt=&quot;&quot;&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/lijinag/IMG_3336.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;后-记-未-经-允-许-请-勿-转-载&quot;&gt;&lt;a href=&quot;#后-记-未-经-允-许-请-勿-转-载&quot; class=&quot;headerlink&quot; title=&quot;后  记  :   未  经  允  许  请  勿  转  载  !  !  !&quot;&gt;&lt;/a&gt;后  记  :   未  经  允  许  请  勿  转  载  !  !  !&lt;/h4&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;本来就打算一场毕业旅行啊，只是因为没有找到小伙伴同行所以迟迟未定。&lt;br&gt;某日夜，Yu小Rong同学突出奇想打工换宿邀游丽江。&lt;br&gt;一拍而和！&lt;/p&gt;
&lt;p&gt;最初的想法是打工换宿二十天左右，然而丽江客栈招义工大都要女孩子啊。&lt;br&gt;搞不懂看看客栈家门而已喽，身强力壮的小伙
    
    </summary>
    
      <category term="Journey" scheme="http://gonghonglou.com/categories/Journey/"/>
    
    
  </entry>
  
  <entry>
    <title>记环崇明岛骑行</title>
    <link href="http://gonghonglou.com/2016/05/10/ChongmingCycling/"/>
    <id>http://gonghonglou.com/2016/05/10/ChongmingCycling/</id>
    <published>2016-05-10T03:06:35.000Z</published>
    <updated>2016-07-05T02:39:11.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;strong&gt;事件：&lt;/strong&gt;环崇明岛骑行&lt;br&gt;&lt;strong&gt;人物：&lt;/strong&gt;博主、博主的小伙伴&lt;br&gt;&lt;strong&gt;时间：&lt;/strong&gt;五一小假&lt;br&gt;&lt;strong&gt;地点：&lt;/strong&gt;崇明岛&lt;br&gt;&lt;strong&gt;正文：&lt;/strong&gt;现在发是不有点晚了？ 闭嘴！&lt;/p&gt;
&lt;p&gt;列位权当是篇环崇明岛骑行的攻略来看也未尝不可。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/ChongmingCycling/IMG_2370.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;博主的车子，算是一款入门级的山地车－－捷安特 ATX 850，油压碟刹还是蛮爽的😄&lt;/p&gt;
&lt;h1 id=&quot;30号&quot;&gt;&lt;a href=&quot;#30号&quot; class=&quot;headerlink&quot; title=&quot;30号&quot;&gt;&lt;/a&gt;30号&lt;/h1&gt;&lt;p&gt;早上约八点半左右从浦东出发至石洞口码头，45km/2h。坐十一点的轮渡（每小时一航班）到崇明岛南门码头，拍了几张照吃过午饭大概有一点钟正式开始了环崇明岛的骑行。&lt;/p&gt;
&lt;p&gt;直接上陈海公路，一条宽阔的省道。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/ChongmingCycling/IMG_2575.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;不过骑起来并不舒服，因为路特别宽所以不挡风，骑行中稍微有些风都会明显感觉到阻力，且经常有上坡。大约一直在22km/h～25km/h之间的速度巡航。&lt;/p&gt;
&lt;p&gt;其实陈海公路相当长一段距离都是不允许非机动车行驶的。当然可以选择团城公路来走，只不过团成公路车辆要多一些难免提不起速度来。&lt;/p&gt;
&lt;p&gt;距离南门港大概有三四十公里的地方到了堡镇，休息了半个小时，再上车的时候。。。那个屁股。。。那个疼。。。。&lt;/p&gt;
&lt;p&gt;所以说骑行最重要的是坚强的屁股啊！！！&lt;/p&gt;
&lt;p&gt;在这条路上出了个小状况，有一段路小伙伴在前面破风，我跟的比较近而且没有太关心前方路况，小伙伴的车子突然躲过一辆停在路边的三轮车时我没来得急反应一车撞翻过去。。。不过还好只是一些擦伤不算太严重🤕️ 只是膝盖的碰伤导致那个下午剩下的路程骑起来比较吃力。&lt;strong&gt;&lt;em&gt;所以要告诫骑友们骑行中尽量保持精力集中，注意前方路况尤其是在有伙伴在前破风时。&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;五点钟左右抵达陈家镇，因为到的略早一点所以很快就找到了旅馆。&lt;strong&gt;&lt;em&gt;提醒骑友们留宿的话尽量到镇中心、县中心且稍早一点找宾馆，节假日房源还是挺紧张的。&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;h1 id=&quot;1号&quot;&gt;&lt;a href=&quot;#1号&quot; class=&quot;headerlink&quot; title=&quot;1号&quot;&gt;&lt;/a&gt;1号&lt;/h1&gt;&lt;p&gt;早晨八点左右吃过早饭赶往东滩湿地，路上又到三个同行的骑友，其中一个还是骑过川藏，环过海南岛的前辈呢。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/ChongmingCycling/IMG_2649.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;十几公里的路程，从陈家镇半小时就能到东滩。拍了几张照：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/ChongmingCycling/IMG_2610.jpg&quot; alt=&quot;&quot;&gt;小湖边的座驾&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/ChongmingCycling/IMG_2639.jpg&quot; alt=&quot;&quot;&gt;天空下的兄弟俩&lt;/p&gt;
&lt;p&gt;最遗憾的便是我们绕了一大圈的路就为了去海边一看，结果到了海边大坝的地方却被野生自然保护区的门卫拦住了，距离海边不过几百米。。。大坝还挡住了我们远眺的视线。。。&lt;/p&gt;
&lt;p&gt;继续环岛的路程，从东滩赶往北沿公路，剩下的便是一直沿着北沿公路骑直到陈海公路回南门港了。因为天气预报说2号早上有雨，所以我们决定直接骑到南门港留宿，1号一天便骑了140公里！&lt;/p&gt;
&lt;p&gt;北沿公路骑起来还是相当爽的，上午大概在25km/h～30km/h巡航，下午因为要赶到南门港加上北沿公路路况相当好所以一直在35km/h左右巡航，简直酸爽！&lt;/p&gt;
&lt;p&gt;不过当拐到陈海公路后因为逆风、上坡再加上已经连续骑了一百多公里，所以这段路就苦逼了。。。&lt;/p&gt;
&lt;p&gt;这是我们环岛的轨迹：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/ChongmingCycling/IMG_26611.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;环岛总路线：&lt;br&gt;从南门港沿陈海公路一路向东南方向到陈家镇，&lt;br&gt;住一晚第二天到都东滩狂了一圈，&lt;br&gt;然后沿北沿公路向西北方向拐到陈海公路，&lt;br&gt;再沿陈海公路到南门港。&lt;/p&gt;
&lt;h1 id=&quot;2号&quot;&gt;&lt;a href=&quot;#2号&quot; class=&quot;headerlink&quot; title=&quot;2号&quot;&gt;&lt;/a&gt;2号&lt;/h1&gt;&lt;p&gt;早上坐十点半的轮渡回上海，再经约45km/2h的路程到家。&lt;/p&gt;
&lt;p&gt;五一环崇明岛骑行，第一次远途骑行正式结束，感觉良好！&lt;/p&gt;
&lt;h1 id=&quot;后记&quot;&gt;&lt;a href=&quot;#后记&quot; class=&quot;headerlink&quot; title=&quot;后记&quot;&gt;&lt;/a&gt;后记&lt;/h1&gt;&lt;p&gt;什么，你说这当一篇攻略来看的话也太逊了？&lt;br&gt;作为一名码农出身的骑行手，不能忍你！   &lt;/p&gt;
&lt;p&gt;这里有一份.gpx文件 👉&lt;a href=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/ChongmingCycling/%20cycling_trajectory.gpx.zip&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;点击下载&lt;/a&gt;&lt;br&gt;记录了环崇明岛的骑行轨迹，将它导入到支持gpx格式的软件里就可以了，大家喜欢用什么软件自行Google吧～&lt;/p&gt;
&lt;p&gt;转载请保留原文地址：&lt;a href=&quot;http://gonghonglou.com/2016/05/10/ChongmingCycling/&quot;&gt;http://gonghonglou.com/2016/05/10/ChongmingCycling&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;事件：&lt;/strong&gt;环崇明岛骑行&lt;br&gt;&lt;strong&gt;人物：&lt;/strong&gt;博主、博主的小伙伴&lt;br&gt;&lt;strong&gt;时间：&lt;/strong&gt;五一小假&lt;br&gt;&lt;strong&gt;地点：&lt;/strong&gt;崇明岛&lt;br&gt;&lt;strong&gt;正文：&lt;/strong
    
    </summary>
    
      <category term="Journey" scheme="http://gonghonglou.com/categories/Journey/"/>
    
    
  </entry>
  
  <entry>
    <title>Mac上搭建Apache Tomcat ＋ MySQL</title>
    <link href="http://gonghonglou.com/2016/04/01/BuildTomcat/"/>
    <id>http://gonghonglou.com/2016/04/01/BuildTomcat/</id>
    <published>2016-04-01T08:27:06.000Z</published>
    <updated>2016-07-23T07:58:12.000Z</updated>
    
    <content type="html">&lt;p&gt;因连接公司项目的测试服务器各种不便所以搭了个本地服务器Apache Tomcat，数据库用的MySQL。写下过程一来总结，二来分享，希望能帮到诸位一二，来介绍需要下载用到的工具吧。&lt;/p&gt;
&lt;h3 id=&quot;Java环境&quot;&gt;&lt;a href=&quot;#Java环境&quot; class=&quot;headerlink&quot; title=&quot;Java环境&quot;&gt;&lt;/a&gt;Java环境&lt;/h3&gt;&lt;p&gt;点击下载：&lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;jdk-7u79-macosx-x64.dmg&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;下载之后一路点击安装即可&lt;/p&gt;
&lt;h3 id=&quot;MySQL数据库&quot;&gt;&lt;a href=&quot;#MySQL数据库&quot; class=&quot;headerlink&quot; title=&quot;MySQL数据库&quot;&gt;&lt;/a&gt;MySQL数据库&lt;/h3&gt;&lt;p&gt;点击下载：&lt;a href=&quot;https://dev.mysql.com/downloads/file/?id=461482&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;mysql-5.6.29-osx10.8-x86_64&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;下载之后同样一路点击安装即可，默认的安装路径为 &lt;code&gt;/usr/local/mysql-5.6.29-osx10.8-x86_64&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此时，在系统偏好设置的最下方如下图所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/apachetomcat/mysql.png&quot; alt=&quot;&quot;&gt; &lt;/p&gt;
&lt;p&gt;点击MySQL，然后点击 &lt;code&gt;Start MySQL Server&lt;/code&gt; 开启数据库服务&lt;/p&gt;
&lt;h3 id=&quot;阿帕奇服务器&quot;&gt;&lt;a href=&quot;#阿帕奇服务器&quot; class=&quot;headerlink&quot; title=&quot;阿帕奇服务器&quot;&gt;&lt;/a&gt;阿帕奇服务器&lt;/h3&gt;&lt;p&gt;点击下载：&lt;a href=&quot;http://tomcat.apache.org/download-70.cgi&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;apache-tomcat-7.0.68.zip&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;下载解压后放到任一目录中，我选择的是MySQL的默认安装目录下 &lt;code&gt;/usr/local/&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;终端 &lt;code&gt;cd&lt;/code&gt; 到阿帕奇服务器所在目录的 &lt;code&gt;bin&lt;/code&gt; 目录下，执行如下命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ ./startup.sh        // 开启服务器
$ ./shutdown.sh       // 关闭服务器
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;新下载的tomcat在启动时会报错：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;./startup.sh: Permission denied
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这是因为权限问题，执行如下命令即可解决：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ chmod u+x *.sh    //表示对当前目录下的*.sh文件的所有者增加可执行权限
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;再次执行开启服务器命令即可。成功开启服务器后，浏览器打开 &lt;a href=&quot;http://localhost:8080&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://localhost:8080&lt;/a&gt; 出现如下界面表示开启成功：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/apachetomcat/localhost.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;如上图点击&lt;code&gt;Manager App&lt;/code&gt;登录需要账号密码，点击&lt;code&gt;取消&lt;/code&gt;会有解释。&lt;br&gt;即打开&lt;code&gt;/usr/local/apache-tomcat-7.0.68/conf&lt;/code&gt;目录下的&lt;code&gt;tomcat-users.xml&lt;/code&gt;文件，在下方添加配置用户名密码如：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;role rolename=&amp;quot;manager-gui&amp;quot;/&amp;gt;
&amp;lt;user username=&amp;quot;tomcat_name&amp;quot; password=&amp;quot;tomcat_password&amp;quot; roles=&amp;quot;manager-gui&amp;quot;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;Sequel-Pro&quot;&gt;&lt;a href=&quot;#Sequel-Pro&quot; class=&quot;headerlink&quot; title=&quot;Sequel Pro&quot;&gt;&lt;/a&gt;Sequel Pro&lt;/h3&gt;&lt;p&gt;点击下载mysql的图形化工具：&lt;a href=&quot;http://sequelpro.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;sequel-pro-1.1.1.dmg&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;安装成功后打开，设置如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/apachetomcat/sequel.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Name&lt;/code&gt;随意，MySQL初始用户名为&lt;code&gt;root&lt;/code&gt; 密码为空，因为初始并没有数据库所以&lt;code&gt;Database&lt;/code&gt;也为空。&lt;/p&gt;
&lt;p&gt;点击&lt;code&gt;Connect&lt;/code&gt;进入后&lt;/p&gt;
&lt;p&gt;1：左上角选择&lt;code&gt;Add Database...&lt;/code&gt;，填入一个名字如&lt;code&gt;troy&lt;/code&gt;，点击&lt;code&gt;add&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;2：&lt;code&gt;Sequel Pro&lt;/code&gt;菜单栏选择&lt;code&gt;Database&lt;/code&gt;–&amp;gt;&lt;code&gt;User Accounts...&lt;/code&gt;,给 root 用户添加用户名密码，点击&lt;code&gt;Apply&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这样在下次登录时就要把&lt;code&gt;Password&lt;/code&gt;和&lt;code&gt;Database&lt;/code&gt;填上再连接&lt;/p&gt;
&lt;h3 id=&quot;添加数据&quot;&gt;&lt;a href=&quot;#添加数据&quot; class=&quot;headerlink&quot; title=&quot;添加数据&quot;&gt;&lt;/a&gt;添加数据&lt;/h3&gt;&lt;p&gt;将自己的&lt;code&gt;.sql&lt;/code&gt;文件用&lt;code&gt;Sequel Pro&lt;/code&gt;打开并运行，这样在数据库中就有了数据&lt;/p&gt;
&lt;p&gt;将自己的&lt;code&gt;.war&lt;/code&gt;的&lt;code&gt;jar&lt;/code&gt;包添加到&lt;code&gt;/usr/local/apache-tomcat-7.0.68/webapps&lt;/code&gt;目录下，这样就有了执行程序&lt;/p&gt;
&lt;p&gt;终端 &lt;code&gt;cd&lt;/code&gt; 到阿帕奇服务器所在目录的 &lt;code&gt;bin&lt;/code&gt; 目录下，开启服务器可执行如下任一命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ ./startup.sh         // 单纯开启服务器

$ ./catalina.sh run    // 开启服务器，控制台可打印服务器数据
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;到这里本地服务器就开启了&lt;/p&gt;
&lt;p&gt;执行如下命令，查看服务器在局域网中的地址：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ ifconfig
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这样你的手机等设备也可以连接到本地服务器了&lt;/p&gt;
&lt;h3 id=&quot;总结一下&quot;&gt;&lt;a href=&quot;#总结一下&quot; class=&quot;headerlink&quot; title=&quot;总结一下&quot;&gt;&lt;/a&gt;总结一下&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;jdk-7u79-macosx-x64.dmg&lt;br&gt; java环境&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;mysql-5.6.29-osx10.9-x86_64.dmg&lt;br&gt; mysql数据库&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;apache-tomcat-7.0.68.zip&lt;br&gt; 阿帕奇服务器&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;sequel-pro-1.1.1.dmg&lt;br&gt; mysql的图形化工具&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;troy_2016-03-25.sql&lt;br&gt; sql语句，放在 Sequel Pro中执行，生成数据）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;rest.war&lt;br&gt; 运行程序，放在 apache-tomcat-7.0.68/webapps 目录下&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;开启服务器&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;愉快的玩耍&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;后记&quot;&gt;&lt;a href=&quot;#后记&quot; class=&quot;headerlink&quot; title=&quot;后记&quot;&gt;&lt;/a&gt;后记&lt;/h3&gt;&lt;p&gt;转载请保留原文地址：&lt;a href=&quot;http://gonghonglou.com/2016/04/01/BuildTomcat&quot;&gt;http://gonghonglou.com/2016/04/01/BuildTomcat&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;因连接公司项目的测试服务器各种不便所以搭了个本地服务器Apache Tomcat，数据库用的MySQL。写下过程一来总结，二来分享，希望能帮到诸位一二，来介绍需要下载用到的工具吧。&lt;/p&gt;
&lt;h3 id=&quot;Java环境&quot;&gt;&lt;a href=&quot;#Java环境&quot; class=&quot;h
    
    </summary>
    
      <category term="Technology" scheme="http://gonghonglou.com/categories/Technology/"/>
    
    
  </entry>
  
  <entry>
    <title>解决OS X 10.11之后CocoaPods的升级问题</title>
    <link href="http://gonghonglou.com/2016/04/01/UpdatePodsQue/"/>
    <id>http://gonghonglou.com/2016/04/01/UpdatePodsQue/</id>
    <published>2016-04-01T07:24:10.000Z</published>
    <updated>2016-07-05T02:40:11.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;问题描述：&quot;&gt;&lt;a href=&quot;#问题描述：&quot; class=&quot;headerlink&quot; title=&quot;问题描述：&quot;&gt;&lt;/a&gt;问题描述：&lt;/h3&gt;&lt;p&gt;OS X 10.11之后升级CocoaPods，执行命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo gem update cocoapods           // 更新至最新版
$ sudo gem update cocoapods --pre     // 或者 更新至测试版
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;报如下错误：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ERROR: While executing gem ... (Errno::EPERM)
Operation not permitted - /usr/bin/pod
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;解决方案一：&quot;&gt;&lt;a href=&quot;#解决方案一：&quot; class=&quot;headerlink&quot; title=&quot;解决方案一：&quot;&gt;&lt;/a&gt;解决方案一：&lt;/h3&gt;&lt;p&gt;使用如下命令更新：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo gem install -n /usr/local/bin cocoapods         // 更新至最新版
$ sudo gem install -n /usr/local/bin cocoapods --pre    // 或者 更新至预览版
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这种解决方法最开始的&lt;code&gt;sudo gem update cocoapods&lt;/code&gt; 和 &lt;code&gt;sudo gem update cocoapods --pre&lt;/code&gt;升级命令是不能用的，若想一切恢复正常请尝试解决方案二。&lt;/p&gt;
&lt;h3 id=&quot;解决方案二：&quot;&gt;&lt;a href=&quot;#解决方案二：&quot; class=&quot;headerlink&quot; title=&quot;解决方案二：&quot;&gt;&lt;/a&gt;解决方案二：&lt;/h3&gt;&lt;p&gt;推倒重来。。。&lt;br&gt;安装Homebrew&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ruby -e &amp;quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;安装Ruby：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;brew install ruby
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;升级CocoaPods，执行命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo gem install cocoapods           // 更新至最新版
$ sudo gem install cocoapods --pre     // 或者 更新至测试版
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;此后，一切OK～&lt;/p&gt;
&lt;h3 id=&quot;后记&quot;&gt;&lt;a href=&quot;#后记&quot; class=&quot;headerlink&quot; title=&quot;后记&quot;&gt;&lt;/a&gt;后记&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;上一篇文章关于CocoaPods的详细介绍：&lt;a href=&quot;http://gonghonglou.com/2016/04/01/CocoaPods&quot;&gt;iOS的库依赖管理工具CocoaPods&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;转载请保留原文地址：&lt;a href=&quot;http://gonghonglou.com/2016/04/01/UpdatePodsQue&quot;&gt;http://gonghonglou.com/2016/04/01/UpdatePodsQue&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;问题描述：&quot;&gt;&lt;a href=&quot;#问题描述：&quot; class=&quot;headerlink&quot; title=&quot;问题描述：&quot;&gt;&lt;/a&gt;问题描述：&lt;/h3&gt;&lt;p&gt;OS X 10.11之后升级CocoaPods，执行命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo gem up
    
    </summary>
    
      <category term="iOS" scheme="http://gonghonglou.com/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>iOS的库依赖管理工具CocoaPods</title>
    <link href="http://gonghonglou.com/2016/04/01/CocoaPods/"/>
    <id>http://gonghonglou.com/2016/04/01/CocoaPods/</id>
    <published>2016-04-01T07:17:10.000Z</published>
    <updated>2016-07-05T10:41:36.000Z</updated>
    
    <content type="html">&lt;p&gt;工欲善其事，必先利其器！在iOS开发中 &lt;a href=&quot;https://github.com/CocoaPods/CocoaPods&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CocoaPods&lt;/a&gt; 作为库依赖管理工具就是一把利器。&lt;/p&gt;
&lt;p&gt;有了CocoaPods你再也不需要手动将需要的第三方库拖进你的工程、添加第三方库所依赖的framework、设置如&lt;code&gt;-fno-objc-arc&lt;/code&gt;等编译参数、手动管理这些库的更新，当某个第三方库有依赖其他的库还要继续拖、拖、拖……&lt;/p&gt;
&lt;p&gt;我们只需要将所需要的第三方库声明到一个名为&lt;code&gt;Podfile&lt;/code&gt;文件中，然后执行&lt;code&gt;Pod install&lt;/code&gt;命令就OK了，CocoaPods就会自动去下载我们所需要库，并为我的工程设置好相应的系统依赖和编译参数。&lt;/p&gt;
&lt;p&gt;只能说，好用到哭～&lt;/p&gt;
&lt;h2 id=&quot;安装CocoaPods&quot;&gt;&lt;a href=&quot;#安装CocoaPods&quot; class=&quot;headerlink&quot; title=&quot;安装CocoaPods&quot;&gt;&lt;/a&gt;安装CocoaPods&lt;/h2&gt;&lt;p&gt;CocoaPods依赖于Ruby环境，刚好Mac下自带Ruby，使用Ruby的gem命令即可安装CocoaPods。&lt;br&gt;为防止因gem太老而引发问题，建议执行如下命令先更新gem：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo gem update --system
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;执行如下命令安装CocoaPods：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo gem install cocoapods
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;如果执行上述命令后没有反应，那是因为Ruby的软件源 &lt;a href=&quot;https://rubygems.org&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://rubygems.org&lt;/a&gt; 使用的是亚马逊的云服务而被墙了（GFW的伟大。。。）&lt;br&gt;可以用淘宝的Ruby镜像来访问cocoapods，依次执行如下命令将官方的Ruby源替换成国内淘宝的源：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ gem sources --remove https://rubygems.org/
$ gem sources -a https://ruby.taobao.org/
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;执行如下命令验证Ruby镜像的确是taobao的：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ gem sources -l
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;出现如下文字才说明上面的命令是执行成功的：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;*** CURRENT SOURCES ***

https://ruby.taobao.org/
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;此时，再次执行gem命令安装CocoaPods：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo gem install cocoapods
$ pod setup
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;稍等片刻 即可安装成功。    &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注： &lt;a href=&quot;http://guides.cocoapods.org/terminal/commands.html#pod_setup&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;pod setup&lt;/code&gt;&lt;/a&gt; 是Cocoapods将它的信息下载到 &lt;code&gt;~/.cocoapods/repos&lt;/code&gt; 目录下。即使在安装时不执行此命令，在初次执行 &lt;code&gt;pod install&lt;/code&gt; 命令时，系统也会自动执行 &lt;code&gt;pod setup&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;升级CocoaPods&quot;&gt;&lt;a href=&quot;#升级CocoaPods&quot; class=&quot;headerlink&quot; title=&quot;升级CocoaPods&quot;&gt;&lt;/a&gt;升级CocoaPods&lt;/h2&gt;&lt;p&gt;升级CocoaPods非常简单，使用Ruby的gem命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo gem update cocoapods           // 更新至最新版
$ sudo gem update cocoapods --pre     // 或者 更新至预览版
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;当然执行如下命令也可以更新：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo gem install cocoapods           // 更新至最新版
$ sudo gem install cocoapods --pre     // 或者 更新至预览版
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;注：OS X 10.11之后升级CocoaPods会有问题。解决方案参见下一篇博客：&lt;a href=&quot;http://gonghonglou.com/2016/04/01/UpdatePodsQue&quot;&gt;解决OS X 10.11之后CocoaPods的升级问题&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;降级CocoaPods&quot;&gt;&lt;a href=&quot;#降级CocoaPods&quot; class=&quot;headerlink&quot; title=&quot;降级CocoaPods&quot;&gt;&lt;/a&gt;降级CocoaPods&lt;/h2&gt;&lt;p&gt;有时我们需要降低CocoaPods版本来解决某些第三方库的兼容问题，例如&lt;a href=&quot;https://github.com/RestKit/RestKit&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RestKit&lt;/a&gt;不兼容CocoaPods的&lt;code&gt;0.39.0&lt;/code&gt;版本，降级到&lt;code&gt;0.38.2&lt;/code&gt;就OK了。&lt;/p&gt;
&lt;h4 id=&quot;移除RubyGems中的Cocoapods程序包&quot;&gt;&lt;a href=&quot;#移除RubyGems中的Cocoapods程序包&quot; class=&quot;headerlink&quot; title=&quot;移除RubyGems中的Cocoapods程序包&quot;&gt;&lt;/a&gt;移除RubyGems中的Cocoapods程序包&lt;/h4&gt;&lt;p&gt;查看&lt;a href=&quot;http://baike.baidu.com/view/1772268.htm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;gems&lt;/a&gt;中本地程序包，执行如下命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ gem list
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;输出如下：&lt;/p&gt;
&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;*** &lt;span class=&quot;selector-tag&quot;&gt;LOCAL&lt;/span&gt; &lt;span class=&quot;selector-tag&quot;&gt;GEMS&lt;/span&gt; ***&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;activesupport&lt;/span&gt; (4&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.5&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;bigdecimal&lt;/span&gt; (1&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.8&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;claide&lt;/span&gt; (1&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.beta&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;, 0&lt;span class=&quot;selector-class&quot;&gt;.9&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;cocoapods&lt;/span&gt; (1&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.beta&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.4&lt;/span&gt;, 0&lt;span class=&quot;selector-class&quot;&gt;.39&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;cocoapods-core&lt;/span&gt; (1&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.beta&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.4&lt;/span&gt;, 0&lt;span class=&quot;selector-class&quot;&gt;.39&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;cocoapods-deintegrate&lt;/span&gt; (1&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.beta&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;cocoapods-downloader&lt;/span&gt; (1&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.beta&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;, 0&lt;span class=&quot;selector-class&quot;&gt;.9&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.3&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;cocoapods-plugins&lt;/span&gt; (1&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.beta&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;, 0&lt;span class=&quot;selector-class&quot;&gt;.4&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;cocoapods-search&lt;/span&gt; (1&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.beta&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;, 0&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;cocoapods-stats&lt;/span&gt; (1&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.beta&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.3&lt;/span&gt;, 0&lt;span class=&quot;selector-class&quot;&gt;.6&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;cocoapods-trunk&lt;/span&gt; (1&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.beta&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;, 0&lt;span class=&quot;selector-class&quot;&gt;.6&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.4&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;cocoapods-try&lt;/span&gt; (1&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.beta&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;, 0&lt;span class=&quot;selector-class&quot;&gt;.5&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;colored&lt;/span&gt; (1&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;did_you_mean&lt;/span&gt; (1&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;escape&lt;/span&gt; (0&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.4&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;fourflusher&lt;/span&gt; (0&lt;span class=&quot;selector-class&quot;&gt;.3&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;fuzzy_match&lt;/span&gt; (2&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.4&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;i18n&lt;/span&gt; (0&lt;span class=&quot;selector-class&quot;&gt;.7&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;io-console&lt;/span&gt; (0&lt;span class=&quot;selector-class&quot;&gt;.4&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.5&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;json&lt;/span&gt; (1&lt;span class=&quot;selector-class&quot;&gt;.8&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.3&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;minitest&lt;/span&gt; (5&lt;span class=&quot;selector-class&quot;&gt;.8&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.3&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;molinillo&lt;/span&gt; (0&lt;span class=&quot;selector-class&quot;&gt;.4&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.4&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;nap&lt;/span&gt; (1&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;net-telnet&lt;/span&gt; (0&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;netrc&lt;/span&gt; (0&lt;span class=&quot;selector-class&quot;&gt;.7&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.8&lt;/span&gt;)     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;power_assert&lt;/span&gt; (0&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.6&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;psych&lt;/span&gt; (2&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.17&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;rake&lt;/span&gt; (10&lt;span class=&quot;selector-class&quot;&gt;.4&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;rdoc&lt;/span&gt; (4&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;rubygems-update&lt;/span&gt; (2&lt;span class=&quot;selector-class&quot;&gt;.6&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;test-unit&lt;/span&gt; (3&lt;span class=&quot;selector-class&quot;&gt;.1&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.5&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;thread_safe&lt;/span&gt; (0&lt;span class=&quot;selector-class&quot;&gt;.3&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.5&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;tzinfo&lt;/span&gt; (1&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;)    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;xcodeproj&lt;/span&gt; (1&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.0&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.beta&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.3&lt;/span&gt;, 0&lt;span class=&quot;selector-class&quot;&gt;.28&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其中包含的CocoaPods版本：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cocoapods (1.0.0.beta.4, 0.39.0)    
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;移除指定版本cocoapods如1.0.0.beta.4，执行如下命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo gem uninstall cocoapods -v 1.0.0.beta.4
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;成功删除则输出：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Successfully uninstalled cocoapods-1.0.0.beta.4
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;还有一个0.39.0版本，移除程序包，执行如下命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo gem uninstall cocoapods -v 0.39.0
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;当移除最后一个版本时，询问：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Remove executables:
        pod, sandbox-pod

in addition to the gem? [Yn]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;按下回车键删除pod。查看CocoaPods组件的安装目录，执行命令&lt;code&gt;$ which pod&lt;/code&gt;所得目录下的&lt;code&gt;pod&lt;/code&gt;文件随即删除。    &lt;/p&gt;
&lt;h4 id=&quot;安装指定版本的Cocoapods程序包&quot;&gt;&lt;a href=&quot;#安装指定版本的Cocoapods程序包&quot; class=&quot;headerlink&quot; title=&quot;安装指定版本的Cocoapods程序包&quot;&gt;&lt;/a&gt;安装指定版本的Cocoapods程序包&lt;/h4&gt;&lt;p&gt;安装指定版本的CocoaPods 如0.39.0，执行如下命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo gem install cocoapods -v 0.39.0  
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;注：若不指定版本，即命令如&lt;code&gt;sudo gem install cocoapods&lt;/code&gt;则默认安装最新版。    &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;安装成功后，执行命令查看版本号：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ pod --version
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;输出：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;0.39.0
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;使用CocoaPods&quot;&gt;&lt;a href=&quot;#使用CocoaPods&quot; class=&quot;headerlink&quot; title=&quot;使用CocoaPods&quot;&gt;&lt;/a&gt;使用CocoaPods&lt;/h2&gt;&lt;h4 id=&quot;搜索第三方库&quot;&gt;&lt;a href=&quot;#搜索第三方库&quot; class=&quot;headerlink&quot; title=&quot;搜索第三方库&quot;&gt;&lt;/a&gt;搜索第三方库&lt;/h4&gt;&lt;p&gt;为判断某第三方库（如AFNetworking）是否支持CocoaPods，执行如下命令来搜索：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ pod search AFNetworking
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;若如下图所示，则可用CocoaPods管理AFNetworking&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/CocoaPods%2FsearchAFNetworking.png&quot; alt=&quot;searchAFNetworking&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;创建Podfile的文件&quot;&gt;&lt;a href=&quot;#创建Podfile的文件&quot; class=&quot;headerlink&quot; title=&quot;创建Podfile的文件&quot;&gt;&lt;/a&gt;创建&lt;code&gt;Podfile&lt;/code&gt;的文件&lt;/h4&gt;&lt;p&gt;CocoaPods就可以根据&lt;code&gt;Podfile&lt;/code&gt;文件里的内容来帮你下载你所需要的库。&lt;a href=&quot;https://guides.cocoapods.org/using/the-podfile.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;点击前往&lt;/a&gt;CocoaPods官方对&lt;code&gt;Podfile&lt;/code&gt;文件的介绍。&lt;br&gt;终端&lt;code&gt;cd&lt;/code&gt;到你的项目所在目录下，创建&lt;code&gt;Podfile&lt;/code&gt;文件：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ vim Podfile
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;按下&lt;code&gt;i&lt;/code&gt;键进入输入状态，在&lt;code&gt;Podfile&lt;/code&gt;文件里输入以下文字：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;platform :ios, &amp;apos;8.0&amp;apos;

target &amp;apos;Your_App_Name&amp;apos; do
pod &amp;apos;AFNetworking&amp;apos;, &amp;apos;~&amp;gt; 3.0&amp;apos;
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;按下&lt;code&gt;esc&lt;/code&gt;键退出输入。然后保存退出，命令是&lt;code&gt;:wq&lt;/code&gt;。你当然可以使用&lt;code&gt;vim&lt;/code&gt;之外的编辑软件来编辑&lt;code&gt;Podfile&lt;/code&gt;文件。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注：cocoapods-1.0.0.beta版本后规定&lt;code&gt;Podfile&lt;/code&gt;文件必须如上所示格式（加上&lt;code&gt;target&lt;/code&gt;）&lt;/p&gt;
&lt;p&gt;当然，采用创建&lt;code&gt;Podfile&lt;/code&gt;文件的另一种方式，终端&lt;code&gt;cd&lt;/code&gt;到你的项目所在目录下执行命令 &lt;code&gt;pod init&lt;/code&gt; 会自动生成格式，自己试一下你会喜欢的～&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;终端&lt;code&gt;cd&lt;/code&gt;到你的项目所在目录下执行如下命令来利用CocoPods下载第三方库：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ pod install
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;如下图所示则下载成功：&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/CocoaPods%2FpodInstall.png&quot; alt=&quot;pod install&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;提示：[!] Please close any current Xcode sessions and use &lt;code&gt;Your_App_Name.xcworkspace&lt;/code&gt; for this project from now on.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;打开&lt;code&gt;Your_App_Name.xcworkspace&lt;/code&gt; 工程之后会看到 &lt;code&gt;Pods&lt;/code&gt; 文件，&lt;code&gt;AFNetwoking&lt;/code&gt;已经成功导入项目了。 &lt;/p&gt;
&lt;p&gt;你或许应当&lt;a href=&quot;https://guides.cocoapods.org/using/pod-install-vs-update.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;点击前往&lt;/a&gt;CocoaPods官网查看对&lt;code&gt;pod install vs. pod update&lt;/code&gt;的介绍。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注：当你 &lt;code&gt;clone&lt;/code&gt; 别人的项目到本地后也需要终端&lt;code&gt;cd&lt;/code&gt;到项目所在目录下执行命令 &lt;code&gt;$ pod install&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;关于Podfile-lock的文件&quot;&gt;&lt;a href=&quot;#关于Podfile-lock的文件&quot; class=&quot;headerlink&quot; title=&quot;关于Podfile.lock的文件&quot;&gt;&lt;/a&gt;关于&lt;code&gt;Podfile.lock&lt;/code&gt;的文件&lt;/h4&gt;&lt;p&gt;执行&lt;code&gt;pod install&lt;/code&gt;之后，CocoaPods会生成一个名为&lt;code&gt;Podfile.lock&lt;/code&gt;的文件。并锁定当前各依赖库的版本，之后如果多次执行&lt;code&gt;pod install&lt;/code&gt;或者团队中的其它人check下来这份包含&lt;code&gt;Podfile.lock&lt;/code&gt;文件的工程后再执行&lt;code&gt;pod install&lt;/code&gt;命令时，获取下来的Pods依赖库的版本就和最开始用户获取到的版本一致。如果没有&lt;code&gt;Podfile.lock&lt;/code&gt;文件，执行&lt;code&gt;pod install&lt;/code&gt;命令会获取第三方库的最新版本，这就有可能造成同一个团队使用的依赖库版本不一致，这对团队协作的危害无疑是灾难性的！&lt;br&gt;在这种情况下，如果团队想使用当前最新版本的依赖库，有两种方案可修改&lt;code&gt;Podfile.lock&lt;/code&gt;的纪录：    &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;更改&lt;code&gt;Podfile&lt;/code&gt;中各依赖库的版本&lt;/li&gt;
&lt;li&gt;执行&lt;code&gt;pod update&lt;/code&gt;命令&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;鉴于&lt;code&gt;Podfile.lock&lt;/code&gt;文件对团队协作如此重要，我们应该将它添加到版本控制里。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://guides.cocoapods.org/using/using-cocoapods.html#should-i-ignore-the-pods-directory-in-source-control&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;点击前往&lt;/a&gt;CocoaPods官网查看对&lt;code&gt;Podfile.lock&lt;/code&gt;的介绍。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;补充：有时执行&lt;code&gt;pod update&lt;/code&gt;命令会特别慢，可以尝试使用如下命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ pod update --verbose --no-repo-update
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;pod install&lt;/code&gt;命令同理：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ pod install --verbose --no-repo-update
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;h2 id=&quot;发布自己的开源框架到CocoaPods&quot;&gt;&lt;a href=&quot;#发布自己的开源框架到CocoaPods&quot; class=&quot;headerlink&quot; title=&quot;发布自己的开源框架到CocoaPods&quot;&gt;&lt;/a&gt;发布自己的开源框架到CocoaPods&lt;/h2&gt;&lt;p&gt;你需要如下图创建一个Framework来打造你自己的开源框架&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/CocoaPods%2FFramework.png&quot; alt=&quot;Framework&quot;&gt;&lt;/p&gt;
&lt;p&gt;发布自己的开源框架到CocoaPods同样需要一个类似&lt;code&gt;Podfile&lt;/code&gt;的文件来告诉CocoaPods我们开源库的名称、版本、作者、描述、地址、所需的framework、依赖库等，这个文件叫&lt;code&gt;Your_Framework_Name.podspec&lt;/code&gt;，开始创建这个文件&lt;/p&gt;
&lt;p&gt;终端&lt;code&gt;cd&lt;/code&gt;到工程目录下，执行如下命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ pod spec create Your_Framework_Name
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这样在你的工程目录下会生成一个&lt;code&gt;Your_Framework_Name.podspec&lt;/code&gt;文件，大概内容为：&lt;/p&gt;
&lt;figure class=&quot;highlight cos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Pod::Spec.&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; |&lt;span class=&quot;keyword&quot;&gt;s&lt;/span&gt;|     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;s&lt;/span&gt;.name         = &lt;span class=&quot;string&quot;&gt;&quot;Your_Framework_Name&quot;&lt;/span&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;s&lt;/span&gt;.version      = &lt;span class=&quot;string&quot;&gt;&quot;0.0.2&quot;&lt;/span&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;s&lt;/span&gt;.summary      = &lt;span class=&quot;string&quot;&gt;&quot;My framework&quot;&lt;/span&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;s&lt;/span&gt;.description  = &amp;lt;&amp;lt;-DESC    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    It&#39;&lt;span class=&quot;keyword&quot;&gt;s&lt;/span&gt; my framework.    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                   DESC    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;s&lt;/span&gt;.ios.deployment_target = &lt;span class=&quot;string&quot;&gt;&quot;8.0&quot;&lt;/span&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;s&lt;/span&gt;.source       = &amp;#123; :git =&amp;gt; &lt;span class=&quot;string&quot;&gt;&quot;https://github.com/gonghonglou/Your_Framework_Name.git&quot;&lt;/span&gt;,     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                     :tag =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;s&lt;/span&gt;.version &amp;#125;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;s&lt;/span&gt;.source_files  = &lt;span class=&quot;string&quot;&gt;&quot;Class/*.&amp;#123;h,m&amp;#125;&quot;&lt;/span&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;s&lt;/span&gt;.public_header_files = [&lt;span class=&quot;string&quot;&gt;&quot;Your_Framework_Name/Your_Framework_Name.h&quot;&lt;/span&gt;]    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;给框架打上 tag&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ git tag 1.0.2
$ git push origin --tags
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;检查 podspec 语法和项目是否正常编译，执行如下命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ pod spec lint Your_Framework_Name.podspec
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;确保没有任何 error 和 warning ，然后推送 podspec 到 CocoaPods 的主仓库就可以了&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ pod trunk push Your_Framework_Name.podspec    // 提交到 CocoaPods 中心仓库
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;后记&quot;&gt;&lt;a href=&quot;#后记&quot; class=&quot;headerlink&quot; title=&quot;后记&quot;&gt;&lt;/a&gt;后记&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;小白出手，请多指教。如言有误，还望斧正！&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;转载请保留原文地址&lt;a href=&quot;http://gonghonglou.com/2016/04/01/CocoaPods&quot;&gt;http://gonghonglou.com/2016/04/01/CocoaPods&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;参考链接&quot;&gt;&lt;a href=&quot;#参考链接&quot; class=&quot;headerlink&quot; title=&quot;参考链接&quot;&gt;&lt;/a&gt;参考链接&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://guides.cocoapods.org/using/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Using CocoaPods&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.superqq.com/blog/2014/10/16/cocoapodsan-zhuang-he-shi-yong-jiao-cheng/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CocoaPods安装和使用教程&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.devtang.com/2014/05/25/use-cocoapod-to-manage-ios-lib-dependency/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;用CocoaPods做iOS程序的依赖管理&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://onevcat.com/2016/01/create-framework/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;如何打造一个让人愉快的框架&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;工欲善其事，必先利其器！在iOS开发中 &lt;a href=&quot;https://github.com/CocoaPods/CocoaPods&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CocoaPods&lt;/a&gt; 作为库依赖管理工具就是一把利器。&lt;/p&gt;
&lt;p
    
    </summary>
    
      <category term="iOS" scheme="http://gonghonglou.com/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>初识ReactiveCocoa</title>
    <link href="http://gonghonglou.com/2016/03/17/MeetingReactiveCocoa/"/>
    <id>http://gonghonglou.com/2016/03/17/MeetingReactiveCocoa/</id>
    <published>2016-03-17T15:12:45.000Z</published>
    <updated>2016-07-05T02:39:52.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ReactiveCocoa&lt;/a&gt; 是一个Objective-C 框架，受 &lt;a href=&quot;https://en.wikipedia.org/wiki/Functional_reactive_programming&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Functional Reactive Programming&lt;/a&gt;的启发。它提供了一系列用来&lt;strong&gt;组合和转换值流&lt;/strong&gt;的API。&lt;/p&gt;
&lt;p&gt;如果你早已熟悉了函数响应式编程或者知道ReactiveCocoa的基本前提，看看&lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa/tree/v2.5/Documentation&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Documentation&lt;/a&gt;这个文件夹里的framework overview等文件更深一步来了解它是怎样在实践中工作的。&lt;/p&gt;
&lt;h2 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h2&gt;&lt;p&gt;ReactiveCocoa受&lt;a href=&quot;http://blog.maybeapps.com/post/42894317939/input-and-output&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;functional reactive programming&lt;/a&gt;的启发。在那些能被替换和修改的地方，RAC提供信号(由&lt;code&gt;RACSignal&lt;/code&gt;代表)来捕获当前和将来的值而不是使用可变的变量。&lt;/p&gt;
&lt;p&gt;通过链接，组合，和反馈的信号，软件可以不需要写那些持续观察和更新value的代码。&lt;/p&gt;
&lt;p&gt;例如，一个文本框能够根据它的改变被绑定到最后一次的值，而不是使用额外的代码每秒去监控时钟和更新文本框。这点跟KVO很像，不过是使用了block，而非&lt;code&gt;-observeValueForKeyPath:ofObject:change:context:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;信号也可以进行异步操作，就像&lt;a href=&quot;https://en.wikipedia.org/wiki/Futures_and_promises&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;futures and promises&lt;/a&gt;。这极大的简化了异步软件中网络连接的代码。&lt;/p&gt;
&lt;p&gt;RAC的重大优势之一就是它提供信号(&lt;code&gt;signal&lt;/code&gt;)这种方式来统一的处理所有异步的行为，包括代理方法、block 回调、target-action 机制、通知和KVO。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/cheaptalk.png&quot; alt=&quot;&quot;&gt; &lt;/p&gt;
&lt;p&gt;这里是简单的例子：&lt;/p&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 当self.username改变时，打印新的名字到控制台&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// RACObserve(self, username)创建一个新的RACSignal，当前self.username的值发生改变时，发送新值给newName&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// -subscribeNext: 当信号发送值时将触发block&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[RACObserve(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, username) subscribeNext:^(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *newName) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;%@&quot;&lt;/span&gt;, newName);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;与KVO 通知不同的是信号能够进行统一的链式操作：&lt;/p&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 只有当名字的开头为&quot;j&quot;时才打印&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// -filter 只有当block返回YES时才会创建一个新的RACSignal发送一个新值&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[RACObserve(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, username)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	filter:^(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *newName) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [newName hasPrefix:&lt;span class=&quot;string&quot;&gt;@&quot;j&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	subscribeNext:^(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *newName) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;%@&quot;&lt;/span&gt;, newName);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;信号也能被用来派生状态。在响应新值中RAC代替观察属性和设置其他的属性，能够在信号和运行周期内传达属性：&lt;/p&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 当self.password 和 self.passwordConfirmation相同时创建一个单向的binding使得self.createEnabled为true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// RAC() 是一个宏指令使得binding看起来nicer&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// +combineLatest:reduce: 建一个信号数组&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 当任一个信号的最后一个值发生改变时触发这个block，返回一个新的RACSignal，将block返回的值作为values发送出去&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RAC(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, createEnabled) = [RACSignal &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	combineLatest:@[ RACObserve(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, password), RACObserve(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, passwordConfirmation) ] &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	reduce:^(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *password, &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *passwordConfirm) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; @([passwordConfirm isEqualToString:password]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;信号不仅是在KVO上，还能在建立在随着时间而改变的值流上。例如，它们可以代表按钮点击：&lt;/p&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 当按钮被点击时打印信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// RACCommand创建信号去表示UI行为。例如，每一个信号可以表示一个按钮的点击、与它相关联的附加工作&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// -rac_command是封装的NSButton方法. 当按钮被点击时触发该命令&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.button.rac_command = [[RACCommand alloc] initWithSignalBlock:^(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; _) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;button was pressed!&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [RACSignal empty];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;或者是异步网络操作：&lt;/p&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 连接&quot;Log in&quot;按钮给网络登录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 当登录命令执行时运行block，开始登录进度&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.loginCommand = [[RACCommand alloc] initWithSignalBlock:^(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; sender) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;// 假设当网络请求完成时 -logIn 方法返回一个信号发送一个value&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [client logIn];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// -executionSignals 每次执行该命令时，这个方法返回一个信号，包括以前的block返回的信号&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.loginCommand.executionSignals subscribeNext:^(RACSignal *loginSignal) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;// 成功登录时打印信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[loginSignal subscribeCompleted:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;Logged in successfully!&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 按钮被点击时执行登录命令&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.loginButton.rac_command = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.loginCommand;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;信号也可以代表定时器，其他的UI事件，或者别的什么随时间而改变的事件。&lt;/p&gt;
&lt;p&gt;在异步操作方面，通过链接和转换信号可以建立更复杂的行为。在一组完整的操作之后更简单的来执行工作：&lt;/p&gt;
&lt;figure class=&quot;highlight axapta&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 执行2个网络操作，当它们都完成时打印信息到控制台&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// +merge: 当数组里的所有信号完成时，返回一个新的RACSignal&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// -subscribeCompleted: 当信号完成时将执行这个block&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[RACSignal &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	merge:@[ [&lt;span class=&quot;keyword&quot;&gt;client&lt;/span&gt; fetchUserRepos], [&lt;span class=&quot;keyword&quot;&gt;client&lt;/span&gt; fetchOrgRepos] ]] &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	subscribeCompleted:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		NSLog(@&lt;span class=&quot;string&quot;&gt;&quot;They&#39;re both done!&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;信号可以被链接到顺序执行异步操作，而不是使用一堆block回调。通常这样简单的来使用&lt;a href=&quot;https://en.wikipedia.org/wiki/Futures_and_promises&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;futures and promises&lt;/a&gt;：&lt;/p&gt;
&lt;figure class=&quot;highlight less&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 用户登录，下载缓存信息，获取服务器信息。都完成后将信息打印到控制台&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 假设登录之后 -logInUser 方法返回一个信号&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// -flattenMap: 当信号发送一个value时触发这个block&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 并且返回一个新的RACSignal来整合从block返回的所有的信号到一个单一信号中&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-attr&quot;&gt;[[[[client &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	logInUser]&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;selector-tag&quot;&gt;flattenMap&lt;/span&gt;:^(User *user) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;// 下载缓存信息，给用户返回一个信号&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		return &lt;span class=&quot;selector-attr&quot;&gt;[client loadCachedMessagesForUser:user]&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attribute&quot;&gt;flattenMap&lt;/span&gt;:^(NSArray *messages) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;// Return a signal that fetches any remaining messages.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		return [client &lt;span class=&quot;attribute&quot;&gt;fetchMessagesAfterMessage&lt;/span&gt;:messages.lastObject];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attribute&quot;&gt;subscribeNext&lt;/span&gt;:^(NSArray *newMessages) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		NSLog(@&lt;span class=&quot;string&quot;&gt;&quot;New messages: %@&quot;&lt;/span&gt;, newMessages);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125; &lt;span class=&quot;attribute&quot;&gt;completed&lt;/span&gt;:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		NSLog(@&lt;span class=&quot;string&quot;&gt;&quot;Fetched all messages.&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;RAC甚至可以简单的建立在一个异步操作的结果上：&lt;/p&gt;
&lt;figure class=&quot;highlight dts&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 创建一个单向的binding，让 self.imageView.image 来放置下载下来的user的头像&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 假设 -fetchUserWithUsername: 方法返回一个信号发送给user&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// -deliverOn: 创建新的信号在其他的队列中进行他们的工作&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 在这个例子中，此方法被用来将工作转移到后台队列和回到主线程&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// -map: 每个user调用这个block，获取并且返回一个新的RACSignal，并且将从block返回的值发送出去&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RAC(self.imageView, image) = [[[[client &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;	fetchUserWithUsername:&lt;/span&gt;@&lt;span class=&quot;string&quot;&gt;&quot;joshaber&quot;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;	deliverOn:&lt;/span&gt;[RACScheduler scheduler]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;	map:&lt;/span&gt;^(User *user) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;// 下载头像 (在后台队列中进行).&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		return [[NSImage alloc] initWithContentsOfURL:user.avatarURL];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;// 此时这个任务将在主线程中执行&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;	deliverOn:&lt;/span&gt;RACScheduler.mainThreadScheduler];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这是一些使用RAC的示范操作，但是它并不能说明RAC为什么如此强大。&lt;br&gt;更多示例代码参见&lt;a href=&quot;https://github.com/AshFurrow/C-41&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;C-41&lt;/a&gt; 或 &lt;a href=&quot;https://github.com/jspahrsummers/GroceryList&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GroceryList&lt;/a&gt;,这些是使用ReactiveCocoa编写的iOS APP。在这个文件夹&lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa/tree/v2.5/Documentation&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Documentation&lt;/a&gt;中可以查到更多的关于RAC的信息。&lt;/p&gt;
&lt;h2 id=&quot;使用ReactiveCocoa&quot;&gt;&lt;a href=&quot;#使用ReactiveCocoa&quot; class=&quot;headerlink&quot; title=&quot;使用ReactiveCocoa&quot;&gt;&lt;/a&gt;使用ReactiveCocoa&lt;/h2&gt;&lt;p&gt;乍一看ReactiveCocoa是非常抽象的，很难理解该怎样将它应用到具体的问题上。&lt;/p&gt;
&lt;p&gt;这有一些示例来展示RAC的优势&lt;/p&gt;
&lt;h3 id=&quot;处理异步或事件驱动的数据源&quot;&gt;&lt;a href=&quot;#处理异步或事件驱动的数据源&quot; class=&quot;headerlink&quot; title=&quot;处理异步或事件驱动的数据源&quot;&gt;&lt;/a&gt;处理异步或事件驱动的数据源&lt;/h3&gt;&lt;p&gt;许多Cocoa编程的重点是对用户事件的反应或应用状态的变化。处理这些事件的代码很快变得非常复杂的就像意大利面一样，伴随着许多回调函数和状态变量处理顺序的问题。&lt;/p&gt;
&lt;p&gt;表面上看起来模式不同，比如UI回调，网络响应和KVO通知，实际上有很多共同之处。&lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa/blob/v2.5/ReactiveCocoa/RACSignal.h&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RACSignal&lt;/a&gt;统一了所有的这些不同的API，使他们可以组合在一起，并以同样的方式操纵。&lt;/p&gt;
&lt;p&gt;例如这样的代码：&lt;/p&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *ObservationContext = &amp;amp;ObservationContext;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)viewDidLoad &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; viewDidLoad];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[LoginManager.sharedManager addObserver:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; forKeyPath:&lt;span class=&quot;string&quot;&gt;@&quot;loggingIn&quot;&lt;/span&gt; options:&lt;span class=&quot;built_in&quot;&gt;NSKeyValueObservingOptionInitial&lt;/span&gt; context:&amp;amp;ObservationContext];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt;.defaultCenter addObserver:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; selector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(loggedOut:) name:UserDidLogOutNotification object:LoginManager.sharedManager];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.usernameTextField addTarget:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; action:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(updateLogInButton) forControlEvents:&lt;span class=&quot;built_in&quot;&gt;UIControlEventEditingChanged&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.passwordTextField addTarget:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; action:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(updateLogInButton) forControlEvents:&lt;span class=&quot;built_in&quot;&gt;UIControlEventEditingChanged&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.logInButton addTarget:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; action:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(logInPressed:) forControlEvents:&lt;span class=&quot;built_in&quot;&gt;UIControlEventTouchUpInside&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)dealloc &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[LoginManager.sharedManager removeObserver:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; forKeyPath:&lt;span class=&quot;string&quot;&gt;@&quot;loggingIn&quot;&lt;/span&gt; context:ObservationContext];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt;.defaultCenter removeObserver:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)updateLogInButton &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; textFieldsNonEmpty = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.usernameTextField.text.length &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.passwordTextField.text.length &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; readyToLogIn = !LoginManager.sharedManager.isLoggingIn &amp;amp;&amp;amp; !&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.loggedIn;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.logInButton.enabled = textFieldsNonEmpty &amp;amp;&amp;amp; readyToLogIn;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;IBAction&lt;/span&gt;)logInPressed:(&lt;span class=&quot;built_in&quot;&gt;UIButton&lt;/span&gt; *)sender &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[[LoginManager sharedManager]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		logInWithUsername:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.usernameTextField.text&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		password:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.passwordTextField.text&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		success:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.loggedIn = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125; failure:^(&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; presentError:error];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)loggedOut:(&lt;span class=&quot;built_in&quot;&gt;NSNotification&lt;/span&gt; *)notification &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.loggedIn = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)observeValueForKeyPath:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)keyPath ofObject:(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)object change:(&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *)change context:(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *)context &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (context == ObservationContext) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; updateLogInButton];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		[&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; observeValueForKeyPath:keyPath ofObject:object change:change context:context];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;… 可以用RAC这样的表示：&lt;/p&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)viewDidLoad &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; viewDidLoad];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	@weakify(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	RAC(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.logInButton, enabled) = [RACSignal&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		combineLatest:@[&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.usernameTextField.rac_textSignal,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.passwordTextField.rac_textSignal,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			RACObserve(LoginManager.sharedManager, loggingIn),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			RACObserve(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, loggedIn)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		] reduce:^(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *username, &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *password, &lt;span class=&quot;built_in&quot;&gt;NSNumber&lt;/span&gt; *loggingIn, &lt;span class=&quot;built_in&quot;&gt;NSNumber&lt;/span&gt; *loggedIn) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; @(username.length &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; password.length &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; !loggingIn.boolValue &amp;amp;&amp;amp; !loggedIn.boolValue);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.logInButton rac_signalForControlEvents:&lt;span class=&quot;built_in&quot;&gt;UIControlEventTouchUpInside&lt;/span&gt;] subscribeNext:^(&lt;span class=&quot;built_in&quot;&gt;UIButton&lt;/span&gt; *sender) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		@strongify(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		RACSignal *loginSignal = [LoginManager.sharedManager&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			logInWithUsername:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.usernameTextField.text&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			password:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.passwordTextField.text];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			[loginSignal subscribeError:^(&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				@strongify(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; presentError:error];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&amp;#125; completed:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				@strongify(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.loggedIn = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	RAC(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, loggedIn) = [[&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt;.defaultCenter&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		rac_addObserverForName:UserDidLogOutNotification object:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		mapReplace:@NO];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;链接依赖操作&quot;&gt;&lt;a href=&quot;#链接依赖操作&quot; class=&quot;headerlink&quot; title=&quot;链接依赖操作&quot;&gt;&lt;/a&gt;链接依赖操作&lt;/h3&gt;&lt;p&gt;依赖在网络请求中是常见的，在下一个请求建立之前，需要完成当前对服务器的请求，比如：&lt;/p&gt;
&lt;figure class=&quot;highlight scheme&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;name&quot;&gt;client&lt;/span&gt; logInWithSuccess:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[&lt;span class=&quot;name&quot;&gt;client&lt;/span&gt; loadCachedMessagesWithSuccess:^(&lt;span class=&quot;name&quot;&gt;NSArray&lt;/span&gt; *messages) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		[&lt;span class=&quot;name&quot;&gt;client&lt;/span&gt; fetchMessagesAfterMessage:messages.lastObject success:^(&lt;span class=&quot;name&quot;&gt;NSArray&lt;/span&gt; *nextMessages) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			NSLog(&lt;span class=&quot;name&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;Fetched all messages.&quot;&lt;/span&gt;)&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125; failure:^(&lt;span class=&quot;name&quot;&gt;NSError&lt;/span&gt; *error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			[&lt;span class=&quot;name&quot;&gt;self&lt;/span&gt; presentError:error]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125; failure:^(&lt;span class=&quot;name&quot;&gt;NSError&lt;/span&gt; *error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		[&lt;span class=&quot;name&quot;&gt;self&lt;/span&gt; presentError:error]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; failure:^(&lt;span class=&quot;name&quot;&gt;NSError&lt;/span&gt; *error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[&lt;span class=&quot;name&quot;&gt;self&lt;/span&gt; presentError:error]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在ReactiveCocoa中可以这样简单的实现：&lt;/p&gt;
&lt;figure class=&quot;highlight clojure&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[[[[client logIn]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	then:&lt;span class=&quot;comment&quot;&gt;^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		return [client loadCachedMessages];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	flattenMap:^(&lt;span class=&quot;name&quot;&gt;NSArray&lt;/span&gt; *messages) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		return [client fetchMessagesAfterMessage:messages.lastObject]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	subscribeError:^(&lt;span class=&quot;name&quot;&gt;NSError&lt;/span&gt; *error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		[self presentError:error]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125; completed:&lt;span class=&quot;comment&quot;&gt;^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		NSLog(@&quot;Fetched all messages.&quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;并行独立工作&quot;&gt;&lt;a href=&quot;#并行独立工作&quot; class=&quot;headerlink&quot; title=&quot;并行独立工作&quot;&gt;&lt;/a&gt;并行独立工作&lt;/h3&gt;&lt;p&gt;与独立的数据集合并行工作，然后将它们合并成一个non-trivial函数到Cocoa，并经常涉及大量的同步：&lt;/p&gt;
&lt;figure class=&quot;highlight mipsasm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;__block NSArray *databaseObjects&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;__block NSArray *fileContents&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NSOperationQueue *&lt;span class=&quot;keyword&quot;&gt;backgroundQueue &lt;/span&gt;= [[NSOperationQueue alloc] init]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NSBlockOperation *databaseOperation = [NSBlockOperation &lt;span class=&quot;keyword&quot;&gt;blockOperationWithBlock:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;	databaseObjects = [databaseClient fetchObjectsMatchingPredicate:predicate]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NSBlockOperation *filesOperation = [NSBlockOperation &lt;span class=&quot;keyword&quot;&gt;blockOperationWithBlock:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;	NSMutableArray *filesInProgress = [NSMutableArray array]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	for (NSString *path in files) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		[filesInProgress &lt;span class=&quot;keyword&quot;&gt;addObject:[NSData &lt;/span&gt;dataWithContentsOfFile:path]]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	fileContents = [filesInProgress copy]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NSBlockOperation *finishOperation = [NSBlockOperation &lt;span class=&quot;keyword&quot;&gt;blockOperationWithBlock:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;	[self finishProcessingDatabaseObjects:databaseObjects fileContents:fileContents]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	NSLog(@&lt;span class=&quot;string&quot;&gt;&quot;Done processing&quot;&lt;/span&gt;)&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[finishOperation &lt;span class=&quot;keyword&quot;&gt;addDependency:databaseOperation];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;[finishOperation &lt;span class=&quot;keyword&quot;&gt;addDependency:filesOperation];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;[&lt;span class=&quot;keyword&quot;&gt;backgroundQueue &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;addOperation:databaseOperation];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;[&lt;span class=&quot;keyword&quot;&gt;backgroundQueue &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;addOperation:filesOperation];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;[&lt;span class=&quot;keyword&quot;&gt;backgroundQueue &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;addOperation:finishOperation];&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上面的代码可以用简单的合成信号来清理和优化：&lt;/p&gt;
&lt;figure class=&quot;highlight mipsasm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;RACSignal *databaseSignal = [[databaseClient&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;	fetchObjectsMatchingPredicate:&lt;/span&gt;predicate]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;	subscribeOn:&lt;/span&gt;[RACScheduler &lt;span class=&quot;keyword&quot;&gt;scheduler]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RACSignal *fileSignal = [RACSignal startEagerlyWithScheduler:[RACScheduler &lt;span class=&quot;keyword&quot;&gt;scheduler] &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;block:^(id&amp;lt;RACSubscriber&amp;gt; &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;subscriber) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	NSMutableArray *filesInProgress = [NSMutableArray array]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	for (NSString *path in files) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		[filesInProgress &lt;span class=&quot;keyword&quot;&gt;addObject:[NSData &lt;/span&gt;dataWithContentsOfFile:path]]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[&lt;span class=&quot;keyword&quot;&gt;subscriber &lt;/span&gt;sendNext:[filesInProgress copy]]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[&lt;span class=&quot;keyword&quot;&gt;subscriber &lt;/span&gt;sendCompleted]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[RACSignal&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;	combineLatest:&lt;/span&gt;@[ databaseSignal, fileSignal ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;	reduce:&lt;/span&gt;^ id (NSArray *databaseObjects, NSArray *fileContents) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		[self finishProcessingDatabaseObjects:databaseObjects fileContents:fileContents]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		return nil&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;	subscribeCompleted:&lt;/span&gt;^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		NSLog(@&lt;span class=&quot;string&quot;&gt;&quot;Done processing&quot;&lt;/span&gt;)&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;]&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;简化collection转换&quot;&gt;&lt;a href=&quot;#简化collection转换&quot; class=&quot;headerlink&quot; title=&quot;简化collection转换&quot;&gt;&lt;/a&gt;简化collection转换&lt;/h3&gt;&lt;p&gt;高阶函数比如 &lt;code&gt;map&lt;/code&gt;, &lt;code&gt;filter&lt;/code&gt;, &lt;code&gt;fold&lt;/code&gt;/&lt;code&gt;reduce&lt;/code&gt;在Foundation中是非常缺少的，导致循环中的代码像这样：&lt;/p&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *results = [&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; array];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *str &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; strings) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (str.length &amp;lt; &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *newString = [str stringByAppendingString:&lt;span class=&quot;string&quot;&gt;@&quot;foobar&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[results addObject:newString];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa/blob/v2.5/ReactiveCocoa/RACSequence.h&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RACSequence&lt;/a&gt;允许所有Cocoa collection在统一的和声明的方式下被操作：&lt;/p&gt;
&lt;figure class=&quot;highlight processing&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;RACSequence *results = [[strings.rac_sequence&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;filter&lt;/span&gt;:^ BOOL (NSString *&lt;span class=&quot;built_in&quot;&gt;str&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;str&lt;/span&gt;.length &amp;gt;= &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;map&lt;/span&gt;:^(NSString *&lt;span class=&quot;built_in&quot;&gt;str&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;built_in&quot;&gt;str&lt;/span&gt; stringByAppendingString:@&lt;span class=&quot;string&quot;&gt;&quot;foobar&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;后记&quot;&gt;&lt;a href=&quot;#后记&quot; class=&quot;headerlink&quot; title=&quot;后记&quot;&gt;&lt;/a&gt;后记&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;以上文章摘译自ReactiveCocoa的Objective-C官方文档&lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa/blob/v2.5/README.md#when-to-use-reactivecocoa&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ReactiveCocoa Documentation&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;以上内容介绍了RAC的基本用法，仅限于使用，所以墙裂建议仔细学习下节的&lt;strong&gt;参考链接&lt;/strong&gt;，了解RAC原理及高阶用法。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;小白出手，请多指教。如言有误，还望斧正！&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;转载请保留原文地址&lt;a href=&quot;http://gonghonglou.com/2016/03/17/MeetingReactiveCocoa&quot;&gt;http://gonghonglou.com/2016/03/17/MeetingReactiveCocoa&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;参考链接&quot;&gt;&lt;a href=&quot;#参考链接&quot; class=&quot;headerlink&quot; title=&quot;参考链接&quot;&gt;&lt;/a&gt;参考链接&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;ReactiveCocoa的Objective-C官方文档&lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa/blob/v2.5/README.md#when-to-use-reactivecocoa&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ReactiveCocoa Documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;雷纯锋的&lt;a href=&quot;http://blog.leichunfeng.com/blog/2015/12/25/reactivecocoa-v2-dot-5-yuan-ma-jie-xi-zhi-jia-gou-zong-lan/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ReactiveCocoa v2.5 源码解析之架构总览&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;吖了个峥的&lt;a href=&quot;http://www.jianshu.com/p/87ef6720a096&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;最快让你上手ReactiveCocoa之基础篇&lt;/a&gt; 和 &lt;a href=&quot;http://www.jianshu.com/p/e10e5ca413b7&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;最快让你上手ReactiveCocoa之进阶篇&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;李忠的&lt;a href=&quot;http://limboy.me/ios/2013/06/19/frp-reactivecocoa.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ReactiveCocoa与Functional Reactive Programming&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;唐巧的&lt;a href=&quot;http://devtang.com/2016/01/03/reactive-cocoa-discussion/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ReactiveCocoa 讨论会&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://github.com/ReactiveCocoa/ReactiveCocoa&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ReactiveCocoa&lt;/a&gt; 是一个Objective-C 框架，受 &lt;a href=&quot;ht
    
    </summary>
    
      <category term="iOS" scheme="http://gonghonglou.com/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>iOS开发tips之日期与星期的对应</title>
    <link href="http://gonghonglou.com/2016/03/03/dateandweek/"/>
    <id>http://gonghonglou.com/2016/03/03/dateandweek/</id>
    <published>2016-03-03T03:47:11.000Z</published>
    <updated>2016-08-04T02:24:57.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;前段时间练手模拟校园app写了个Demo，其中在写课程表的界面时，加上了当前日期，为了让日期与星期对应也是前后折腾了好几次，主要还是对日期的情况思考的不够全面吧（比如判断每月天数和月初月末的交替），不过最终还是完成需求。最后意外发现简便方法，写下来分享。    &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;对校园app的Demo有兴趣的话，请移驾GitHub:  &lt;a href=&quot;https://github.com/gonghonglou/QLU-BlogDemo&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;QLU-BlogDemo&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;正文&quot;&gt;&lt;a href=&quot;#正文&quot; class=&quot;headerlink&quot; title=&quot;正文&quot;&gt;&lt;/a&gt;正文&lt;/h2&gt;&lt;p&gt;首先看一下模样吧（如图中红框所示）&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/dateandweek%2Fdateweek.png&quot; alt=&quot;课程表&quot;&gt;&lt;br&gt;最基本的：获取当前日期的方法&lt;/p&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 获取当前时间&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSDate&lt;/span&gt; *senddate = [&lt;span class=&quot;built_in&quot;&gt;NSDate&lt;/span&gt; date];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSDateFormatter&lt;/span&gt; *dateformatter = [[&lt;span class=&quot;built_in&quot;&gt;NSDateFormatter&lt;/span&gt; alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dateformatter setDateFormat:&lt;span class=&quot;string&quot;&gt;@&quot;yyy&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *yearString = [dateformatter stringFromDate:senddate];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dateformatter setDateFormat:&lt;span class=&quot;string&quot;&gt;@&quot;MM&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *monthString = [dateformatter stringFromDate:senddate];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dateformatter setDateFormat:&lt;span class=&quot;string&quot;&gt;@&quot;dd&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *dayString = [dateformatter stringFromDate:senddate];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dateformatter setDateFormat:&lt;span class=&quot;string&quot;&gt;@&quot;EEE&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *weekString = [dateformatter stringFromDate:senddate];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;-%@&quot;&lt;/span&gt;,weekString);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; year = [yearString intValue];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;-%d&quot;&lt;/span&gt;, year);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; month = [monthString intValue];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;--%d&quot;&lt;/span&gt;, month);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; day = [dayString intValue];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;---%d&quot;&lt;/span&gt;, day);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;看打印结果：&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/dateandweek%2F985173.png&quot; alt=&quot;打印结果&quot;&gt;&lt;br&gt;然后就是把获取到的日期放到对应星期上去了,需要格外注意的要判断的几点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;不同月的天数&lt;/li&gt;
&lt;li&gt;月底时，显示下个月月初的日期&lt;/li&gt;
&lt;li&gt;月初时，显示上个月月底的日期&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;首先获取不同月的天数,并抽离成类方法方便后边调用&lt;/p&gt;
&lt;figure class=&quot;highlight rust&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 获取某年某月总共多少天     &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;)getDaysInMonth:(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;)year month:(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;)imonth &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;// imonth == 0的情况是应对在CourseViewController里month-1的情况&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;((imonth == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;span class=&quot;params&quot;&gt;||&lt;/span&gt;(imonth == &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;span class=&quot;params&quot;&gt;||&lt;/span&gt;(imonth == &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;)&lt;span class=&quot;params&quot;&gt;||&lt;/span&gt;(imonth == &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;)&lt;span class=&quot;params&quot;&gt;||&lt;/span&gt;(imonth == &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;)&lt;span class=&quot;params&quot;&gt;||&lt;/span&gt;(imonth == &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;)&lt;span class=&quot;params&quot;&gt;||&lt;/span&gt;(imonth == &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;span class=&quot;params&quot;&gt;||&lt;/span&gt;(imonth == &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;31&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;((imonth == &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;)&lt;span class=&quot;params&quot;&gt;||&lt;/span&gt;(imonth == &lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;)&lt;span class=&quot;params&quot;&gt;||&lt;/span&gt;(imonth == &lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;)&lt;span class=&quot;params&quot;&gt;||&lt;/span&gt;(imonth == &lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;((year%&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; == &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;span class=&quot;params&quot;&gt;||&lt;/span&gt;(year%&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; == &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;span class=&quot;params&quot;&gt;||&lt;/span&gt;(year%&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; == &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(year%&lt;span class=&quot;number&quot;&gt;400&lt;/span&gt; == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;29&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(year%&lt;span class=&quot;number&quot;&gt;100&lt;/span&gt; == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;29&lt;/span&gt;;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;放置label的方法，在label上写下日期&lt;/p&gt;
&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 添加日期&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)&lt;span class=&quot;string&quot;&gt;setDateLabel:&lt;/span&gt;(CGRect)rect &lt;span class=&quot;string&quot;&gt;number:&lt;/span&gt;(NSString *)number&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	UILabel *label = [[UILabel alloc] &lt;span class=&quot;string&quot;&gt;initWithFrame:&lt;/span&gt;rect];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	label.textColor = [UIColor &lt;span class=&quot;string&quot;&gt;colorWithRed:&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;100.0&lt;/span&gt;&lt;span class=&quot;regexp&quot;&gt;/255 green:	73.0/&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;255&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;blue:&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;250.0&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;255&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;alpha:&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	label.textAlignment = NSTextAlignmentCenter;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	label.text = number;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	label.font = [UIFont &lt;span class=&quot;string&quot;&gt;systemFontOfSize:&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[self.view &lt;span class=&quot;string&quot;&gt;addSubview:&lt;/span&gt;label];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;开始判断。拿到周一是几号后面的日数递增就OK了，注意月末月初交替的特殊情况（看机智如我，走起)&lt;/p&gt;
&lt;figure class=&quot;highlight processing&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 判断当前天是周几，从而计算出当周的周一是几号（负数表示上个月月末）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([weekString  isEqual: @&lt;span class=&quot;string&quot;&gt;&quot;周一&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; - &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;// 因为下面有 day++;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([weekString isEqual:@&lt;span class=&quot;string&quot;&gt;&quot;周二&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; - &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([weekString isEqual:@&lt;span class=&quot;string&quot;&gt;&quot;周三&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; - &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([weekString isEqual:@&lt;span class=&quot;string&quot;&gt;&quot;周四&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; - &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([weekString isEqual:@&lt;span class=&quot;string&quot;&gt;&quot;周五&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; - &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([weekString isEqual:@&lt;span class=&quot;string&quot;&gt;&quot;周六&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; - &lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([weekString isEqual:@&lt;span class=&quot;string&quot;&gt;&quot;周日&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; - &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt;&amp;lt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123; &lt;span class=&quot;comment&quot;&gt;// 月初时显示上个月月末的日期&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 上个月末往后的月初数字&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; days = [GetDays getDaysInMonth:&lt;span class=&quot;built_in&quot;&gt;year&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;month&lt;/span&gt;:&lt;span class=&quot;built_in&quot;&gt;month&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt;++;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; &amp;gt; days) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt;++;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 月初之前的月末数字&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;switch&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; = days; &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; = days&lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;-2&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; = days&lt;span class=&quot;number&quot;&gt;-2&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;-3&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; = days&lt;span class=&quot;number&quot;&gt;-3&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;-4&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; = days&lt;span class=&quot;number&quot;&gt;-4&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;-5&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; = days&lt;span class=&quot;number&quot;&gt;-5&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [self setDateLabel:CGRectMake(i*((self.view.frame.&lt;span class=&quot;built_in&quot;&gt;size&lt;/span&gt;.&lt;span class=&quot;built_in&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-33.5&lt;/span&gt;)/&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;+&lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt;)+&lt;span class=&quot;number&quot;&gt;30.5&lt;/span&gt;, kTopY, (self.view.frame.&lt;span class=&quot;built_in&quot;&gt;size&lt;/span&gt;.&lt;span class=&quot;built_in&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-33.5&lt;/span&gt;)/&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;) number:[NSString stringWithFormat:@&lt;span class=&quot;string&quot;&gt;&quot;%d&quot;&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt;]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123; &lt;span class=&quot;comment&quot;&gt;// 月末&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; days = [GetDays getDaysInMonth:&lt;span class=&quot;built_in&quot;&gt;year&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;month&lt;/span&gt;:&lt;span class=&quot;built_in&quot;&gt;month&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt;++;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; &amp;gt; days) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt;++;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [self setDateLabel:CGRectMake(i*((self.view.frame.&lt;span class=&quot;built_in&quot;&gt;size&lt;/span&gt;.&lt;span class=&quot;built_in&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-33.5&lt;/span&gt;)/&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;+&lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt;)+&lt;span class=&quot;number&quot;&gt;30.5&lt;/span&gt;, kTopY, (self.view.frame.&lt;span class=&quot;built_in&quot;&gt;size&lt;/span&gt;.&lt;span class=&quot;built_in&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-33.5&lt;/span&gt;)/&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;) number:[NSString stringWithFormat:@&lt;span class=&quot;string&quot;&gt;&quot;%d&quot;&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;day&lt;/span&gt;]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;劳心劳力，大功告成。接下来小L要告诉大家，上边的判断看看就好了（哭吧）我们还有so so so easy的方法（嘿）&lt;/p&gt;
&lt;p&gt;方法推荐：获取几年几月几日后的日期,并抽离成类方法方便后边调用&lt;/p&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  *  获取几年几月几日后的日期，0表示当天，负数表示之前&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  *  这里只要取到日就好了，年月置0，表示当年当月&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;)getOneDay:(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;)day &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; year = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, month = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSCalendar&lt;/span&gt; *calendar = [[&lt;span class=&quot;built_in&quot;&gt;NSCalendar&lt;/span&gt; alloc] initWithCalendarIdentifier:&lt;span class=&quot;built_in&quot;&gt;NSCalendarIdentifierGregorian&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSDateComponents&lt;/span&gt; *comps = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    comps = [calendar components:&lt;span class=&quot;built_in&quot;&gt;NSCalendarUnitYear&lt;/span&gt;|&lt;span class=&quot;built_in&quot;&gt;NSCalendarUnitMonth&lt;/span&gt;|&lt;span class=&quot;built_in&quot;&gt;NSCalendarUnitDay&lt;/span&gt; fromDate:[&lt;span class=&quot;built_in&quot;&gt;NSDate&lt;/span&gt; date]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSDateComponents&lt;/span&gt; *adcomps = [[&lt;span class=&quot;built_in&quot;&gt;NSDateComponents&lt;/span&gt; alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [adcomps setYear:year];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [adcomps setMonth:month];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [adcomps setDay:day];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSDate&lt;/span&gt; *newdate = [calendar dateByAddingComponents:adcomps toDate:[&lt;span class=&quot;built_in&quot;&gt;NSDate&lt;/span&gt; date] options:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSDateFormatter&lt;/span&gt;  *formatter = [[&lt;span class=&quot;built_in&quot;&gt;NSDateFormatter&lt;/span&gt; alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [formatter setDateFormat:&lt;span class=&quot;string&quot;&gt;@&quot;dd&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *  dayString = [formatter stringFromDate:newdate];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [dayString intValue];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;重点来了：&lt;/p&gt;
&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 判断当前天是周几，从而计算出当周的周一是几号（负数表示上个月月末）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([weekString  &lt;span class=&quot;string&quot;&gt;isEqual:&lt;/span&gt; @&lt;span class=&quot;string&quot;&gt;&quot;周一&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    day = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;// 因为下面有 day++;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([weekString &lt;span class=&quot;string&quot;&gt;isEqual:&lt;/span&gt;@&lt;span class=&quot;string&quot;&gt;&quot;周二&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    day = &lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([weekString &lt;span class=&quot;string&quot;&gt;isEqual:&lt;/span&gt;@&lt;span class=&quot;string&quot;&gt;&quot;周三&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    day = &lt;span class=&quot;number&quot;&gt;-2&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([weekString &lt;span class=&quot;string&quot;&gt;isEqual:&lt;/span&gt;@&lt;span class=&quot;string&quot;&gt;&quot;周四&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    day = &lt;span class=&quot;number&quot;&gt;-3&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([weekString &lt;span class=&quot;string&quot;&gt;isEqual:&lt;/span&gt;@&lt;span class=&quot;string&quot;&gt;&quot;周五&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    day = &lt;span class=&quot;number&quot;&gt;-4&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([weekString &lt;span class=&quot;string&quot;&gt;isEqual:&lt;/span&gt;@&lt;span class=&quot;string&quot;&gt;&quot;周六&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    day = &lt;span class=&quot;number&quot;&gt;-5&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([weekString &lt;span class=&quot;string&quot;&gt;isEqual:&lt;/span&gt;@&lt;span class=&quot;string&quot;&gt;&quot;周日&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    day = &lt;span class=&quot;number&quot;&gt;-6&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 放置日期&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	[self &lt;span class=&quot;string&quot;&gt;setDateLabel:&lt;/span&gt;CGRectMake(i*((self.view.frame.size.width&lt;span class=&quot;number&quot;&gt;-33.5&lt;/span&gt;)&lt;span class=&quot;regexp&quot;&gt;/7+0.5)+30.5, kTopY, (self.view.frame.size.width-33.5)/&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;) &lt;span class=&quot;string&quot;&gt;number:&lt;/span&gt;[NSString &lt;span class=&quot;string&quot;&gt;stringWithFormat:&lt;/span&gt;@&lt;span class=&quot;string&quot;&gt;&quot;%d&quot;&lt;/span&gt;, [GetOneDay &lt;span class=&quot;string&quot;&gt;getOneDay:&lt;/span&gt;day++]]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如此才是万事大吉！&lt;br&gt;比上边的判断简单了许多，不过上边的判断也是一种思路，所以记录下来，给大家一个借鉴！&lt;/p&gt;
&lt;h2 id=&quot;后记&quot;&gt;&lt;a href=&quot;#后记&quot; class=&quot;headerlink&quot; title=&quot;后记&quot;&gt;&lt;/a&gt;后记&lt;/h2&gt;&lt;p&gt;小白出手，请多指教。&lt;br&gt;如言有误，还望斧正！&lt;/p&gt;
&lt;p&gt;转载请保留原文地址：&lt;a href=&quot;http://gonghonglou.com/2016/03/03/dateandweek&quot;&gt;http://gonghonglou.com/2016/03/03/dateandweek&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;迁移文章 首发于2015-10-13&lt;/strong&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;前段时间练手模拟校园app写了个Demo，其中在写课程表的界面时，加上了当前日期，为了让日期与星期对应也是前后折腾了好几次，主要还是对日期的
    
    </summary>
    
      <category term="iOS" scheme="http://gonghonglou.com/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>由丢失一部iPhone6引发的祸端</title>
    <link href="http://gonghonglou.com/2016/03/03/protectappleid/"/>
    <id>http://gonghonglou.com/2016/03/03/protectappleid/</id>
    <published>2016-03-03T03:36:26.000Z</published>
    <updated>2016-07-05T02:40:00.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;前言：&quot;&gt;&lt;a href=&quot;#前言：&quot; class=&quot;headerlink&quot; title=&quot;前言：&quot;&gt;&lt;/a&gt;前言：&lt;/h2&gt;&lt;p&gt;刚从售后拿到Mac 回学校的公交车上。记录下这悲惨的经历告诫各位果友&lt;br&gt;篇幅略长，怕有些读者看不下去遂将告诫先写在前面：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;为保护手机，在iPhone设置–iCloud里有查找我的iPhone功能，确保开启（默认开启）万一不幸手机丢失，尽快登录iCloud官网或在查找我的iPhone app里将iPhone设为丢失模式或锁定iPhone，为保护隐私可选抹掉iPhone（会删除iPhone里的所有数据，不可逆） Mac和iPad一样如此&lt;/li&gt;
&lt;li&gt;手机在丢失模式下，锁屏界面会显示你设置的一个联系号码。若是好心人送还手机自然大喜。但也要提防钓鱼网站，伪造Apple身份给你发短信或邮件，骗取iCloud密码（lz已上当羞耻哭晕在厕所）&lt;/li&gt;
&lt;li&gt;万一不幸iCloud密码泄漏，请及时修改Apple ID的验证问题和Apple ID的密码。切勿以为只改密码万事大吉，盗取你的密码就能获取你的验证问题的答案，有了验证问题答案就能查看你更改的密码（怕）并且可以远程操作（锁定、抹掉…）你的设备（lz已受害二次哭晕在厕所）&lt;/li&gt;
&lt;li&gt;为防万一，建议在iCloud的管理我的Apple ID里开启两步验证，此后要操作远程命令就需要短信验证码再加上密码或验证问题。（开启两步验证会给你一份字母加数字的密钥，很重要，是你丢失密码或手机卡后的唯一凭证，切记保存好）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;那么故事是这样的：&quot;&gt;&lt;a href=&quot;#那么故事是这样的：&quot; class=&quot;headerlink&quot; title=&quot;那么故事是这样的：&quot;&gt;&lt;/a&gt;那么故事是这样的：&lt;/h3&gt;&lt;h4 id=&quot;事情发生在15年10月8号，却并非起始于这个日期。&quot;&gt;&lt;a href=&quot;#事情发生在15年10月8号，却并非起始于这个日期。&quot; class=&quot;headerlink&quot; title=&quot;事情发生在15年10月8号，却并非起始于这个日期。&quot;&gt;&lt;/a&gt;事情发生在15年10月8号，却并非起始于这个日期。&lt;/h4&gt;&lt;p&gt;8号上午如往常一样打开Mac准备码字，联网之后弹出一个提示iCloud什么的对话框，点了确定Mac就重启了，重启之后竟出现这样的界面：&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/protectappleid%2Fopen.JPG&quot; alt=&quot;PIN码&quot;&gt;&lt;br&gt;这是什么鬼？刚开始四个方框上提示：输入锁定此系统的PIN码来解锁。what？PIN码？我没有啊，崩溃！百度一些提示说按住option键重新开机。然后出现了一个锁头（这就是固件锁）&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/protectappleid%2Fsock.png&quot; alt=&quot;固件锁&quot;&gt;&lt;br&gt;并没有什么卵用，遂拨打4006-272273（苹果技术支持热线）寻助AppleCare，一系列问答之后大概明白了应该是iCloud密码泄漏，Mac被远程恶意锁定。客服询问我的Apple ID是和别人共用还是怎样泄漏过，才回想起7月份失窃一部iPhone6（新机、心痛）&lt;/p&gt;
&lt;h4 id=&quot;这就是故事的起点：&quot;&gt;&lt;a href=&quot;#这就是故事的起点：&quot; class=&quot;headerlink&quot; title=&quot;这就是故事的起点：&quot;&gt;&lt;/a&gt;这就是故事的起点：&lt;/h4&gt;&lt;p&gt;失窃iPhone后随即登录iCloud将iPhone6设为丢失模式（这时可留下一个联系方式显示在手机解锁屏幕上）几天后收到一条短信（来自香港号码）以苹果的身份，大体意思说&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;您的iPhone在苹果售后申请换机，因凭证信息不符被Apple售后截下，若情况符实请登录&lt;br&gt;    iCloud网站（一段网址）申请扣机，确认信息后Apple会联系警察交还手机。。。。。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;一开始没注意是因为对于找回手机已经不抱希望了（尽管我还没有锁定iPhone，汗）后来看到可申请扣机（其实一开始是短信太长没看懂，笑）因为失窃后已报警，又看到希望的我内心是鸡冻的。然后就上网登录”iCoud.com”(和平常登录时的iCloud界面一个模样)熟练输入帐号密码，登录之后找半天并没有找回iPhone啊，遂电话Apple客服&lt;br&gt;被惨痛告知：这是钓鱼网站骗取Apple ID密码的常见手法。赶紧到iCloud官网查看我的设备，已不见iPhone6的踪影（哭）这里要说客服态度很好，在我传达了收到的短信后，他们首先关注的是我是否已输入了登录密码。&lt;/p&gt;
&lt;p&gt;如此看来便是那时候泄漏的iCloud密码了。之后一直没有改密码（汗）而可恶的盗窃者在盗取我的iCloud密码后竟默默蛰伏至今&lt;br&gt;我在6号晚12点左右因为6s的某原因在手机上修改了iCloud密码，在Mac被锁后发现一份iCloud邮件提示我的Mac在7号下午八点多的时候被锁定。以此推断应该是我改密码的行为触动了盗窃者所以远程锁定了我的Mac，之前我以为改密码在Mac被锁之前账号应该是安全的，后来才知并非如此（如前言所述）&lt;br&gt;前后打了四五次400，有一次为查看Apple ID的动态要转接Apple的最高级别安全部门，转接等待一个半小时没接通（汗）不过客服们的态度都特别热情，这点很欣慰！只是她们貌似对PIN码什么的也说不太清，大概认定为被人远程恶意锁定了。&lt;/p&gt;
&lt;h4 id=&quot;解决方案：&quot;&gt;&lt;a href=&quot;#解决方案：&quot; class=&quot;headerlink&quot; title=&quot;解决方案：&quot;&gt;&lt;/a&gt;解决方案：&lt;/h4&gt;&lt;p&gt;到售后解锁，赶到市里，售后态度也很好，只是他们也说不清楚PIN码什么的，今天取Mac时一位技术大哥总算给讲明白怎么回事，解释如下：&lt;br&gt;1）在查找我的iPhone里锁定我的iPhone或iPad可通过密码解锁，若忘记密码可向苹果申请解锁（需要设备的购买凭证，必须要且有效）&lt;br&gt;2）但是，锁定Mac时会输入一个密码，这个密码就是上面提到的PIN码&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;输入PIN码可以进入系统但是不能进行更改硬盘操作&lt;/li&gt;
&lt;li&gt;若是忘记PIN码或者是被恶意锁定的，按组合键&lt;a href=&quot;https://support.apple.com/zh-cn/HT204063&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Command+Option+P+R&lt;/a&gt;可以清空PIN码然后进入系统但仍然不能进行更改硬盘操作。&lt;/li&gt;
&lt;li&gt;开机时按住option键进入磁盘分区时就会出现固件锁，在这里输入PIN码也可以进入系统仍然不能进行更改硬盘操作。&lt;br&gt;怎样才能解开固件锁，只有去售后了，他们向Apple提供固件锁的信息，Apple做一个解密包发回来解锁，济南售后花费300大洋，倒是不贵可是心痛（哭）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;为保安全，你也可以为你的Mac加上固件锁，自行百度（甚用，忘了心情就不好了。。。）&lt;/p&gt;
&lt;p&gt;最后不幸中的万幸是，盗窃者或许先点的锁定Mac这一不可逆的过程导致抹掉Mac不可用，又或者其他的网络连接什么的原因总之我的硬盘资料没有被抹。技术大哥说之前解掉的几个固件锁打开后数据都是被抹掉的，连系统都没了（庆幸）&lt;br&gt;发现资料还在时心情是无法用语言表达的，就用微博上一帅哥的表情来表达吧&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/protectappleid%2Fhaha.png&quot; alt=&quot;屏幕快照 2015-10-10 17.39.16.png&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;再次告诫广大果友：&quot;&gt;&lt;a href=&quot;#再次告诫广大果友：&quot; class=&quot;headerlink&quot; title=&quot;再次告诫广大果友：&quot;&gt;&lt;/a&gt;再次告诫广大果友：&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;在保护好自己apple设备的同时更要保护好自己的Apple ID密码，最好开启两步验证。&lt;/li&gt;
&lt;li&gt;对于重要文件及时做好备份，Apple的锁做的很强大，极好的保护了我们的设备和数据，可是一旦泄露iCloud密码伤害也会很致命&lt;/li&gt;
&lt;li&gt;对于备份，Mac上有Time Machine备份工具甚是好用，听起来（嘿）&lt;br&gt;也是售后的技术大哥告知的，感谢AppleCare和Apple售后的好态度。&lt;br&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/protectappleid%2Fsave.png&quot; alt=&quot;屏幕快照 2015-10-10 18.41.11.png&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;后记&quot;&gt;&lt;a href=&quot;#后记&quot; class=&quot;headerlink&quot; title=&quot;后记&quot;&gt;&lt;/a&gt;后记&lt;/h2&gt;&lt;p&gt;转载请保留原文地址：&lt;a href=&quot;http://gonghonglou.com/2016/03/03/protectappleid&quot;&gt;http://gonghonglou.com/2016/03/03/protectappleid&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;迁移文章 首发于2015-10-10 &lt;/strong&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言：&quot;&gt;&lt;a href=&quot;#前言：&quot; class=&quot;headerlink&quot; title=&quot;前言：&quot;&gt;&lt;/a&gt;前言：&lt;/h2&gt;&lt;p&gt;刚从售后拿到Mac 回学校的公交车上。记录下这悲惨的经历告诫各位果友&lt;br&gt;篇幅略长，怕有些读者看不下去遂将告诫先写在前面：&lt;/p&gt;
    
    </summary>
    
      <category term="Life" scheme="http://gonghonglou.com/categories/Life/"/>
    
    
  </entry>
  
  <entry>
    <title>Mac上搭建基于GitHub的Hexo博客</title>
    <link href="http://gonghonglou.com/2016/02/03/firstblog/"/>
    <id>http://gonghonglou.com/2016/02/03/firstblog/</id>
    <published>2016-02-03T06:50:14.000Z</published>
    <updated>2016-07-25T08:18:18.000Z</updated>
    
    <content type="html">&lt;p&gt;这是一篇详细文章来讲述用Mac搭建Hexo博客于Github上的完整历程， 也是踩了无数的坑搭起来的，现在写下些经验来分享，希望能帮大家少踩些坑。&lt;/p&gt;
&lt;p&gt;曾买过一款阿里的云虚拟主机，后来才发现不能自己装软件只能上传网站程序，除非另买&lt;a href=&quot;https://www.aliyun.com/easybuy&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ECS&lt;/a&gt;，对于第一个月的实习工资还没拿到手的我想想还是算了，先用Wordpress搭起来玩玩吧。然而在上传网站程序中几次失败，本就觉得没劲，遂一怒转向Github。好了，废话少说，开始吧。&lt;/p&gt;
&lt;h2 id=&quot;1&quot;&gt;环境配置&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://hexo.io/docs&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo官网&lt;/a&gt;上本就有对Hexo安装及使用的详细介绍，墙裂推荐。这里来讲述自己安装的亲身步骤，或有区别。&lt;/p&gt;
&lt;h3 id=&quot;1.1&quot;&gt;1.Node.js&lt;/h3&gt;

&lt;p&gt;用来生成静态页面。移步&lt;a href=&quot;https://nodejs.org/en/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Node.js官网&lt;/a&gt;，下载v5.5.0 Stable 一路安装即可。&lt;/p&gt;
&lt;h3 id=&quot;1.2&quot;&gt;2.Git&lt;/h3&gt;

&lt;p&gt;用来将本地Hexo内容提交到Github上。Xcode自带Git，这里不再赘述。如果没有Xcode可以参考&lt;a href=&quot;https://hexo.io/docs&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo官网&lt;/a&gt;上的安装方法。    &lt;/p&gt;
&lt;h2 id=&quot;2&quot;&gt;安装Hexo&lt;/h2&gt;

&lt;p&gt;当Node.js和Git都安装好后就可以正式安装Hexo了，终端执行如下命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo npm install -g hexo        
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;输入管理员密码（Mac登录密码）即开始安装 (&lt;code&gt;sudo&lt;/code&gt;:linux系统管理指令  &lt;code&gt;-g&lt;/code&gt;:全局安装)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意坑一：&lt;a href=&quot;https://hexo.io/docs&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo官网&lt;/a&gt;上的安装命令是&lt;code&gt;$ npm install -g hexo-cli&lt;/code&gt;，安装时不要忘记前面加上&lt;code&gt;sudo&lt;/code&gt;，否则会因为权限问题报错。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;2.1&quot;&gt;初始化&lt;/h3&gt;

&lt;p&gt;终端cd到一个你选定的目录，执行&lt;code&gt;hexo init&lt;/code&gt;命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ hexo init blog
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;blog&lt;/code&gt;是你建立的文件夹名称。cd到&lt;code&gt;blog&lt;/code&gt;文件夹下，执行如下命令，安装npm：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ npm install
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;执行如下命令，开启hexo服务器：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ hexo s
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;此时，浏览器中打开网址&lt;a href=&quot;http://0.0.0.0:4000&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://localhost:4000&lt;/a&gt;，能看到如下页面：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/firstblog%2Fhexo4000.png&quot; alt=&quot;http://localhost:4000&quot;&gt;&lt;/p&gt;
&lt;p&gt;本地设置好后，接下来开始关联Github。&lt;/p&gt;
&lt;h2 id=&quot;3&quot;&gt;关联Github&lt;/h2&gt;

&lt;h3 id=&quot;3.1&quot;&gt;1.创建仓库&lt;/h3&gt;

&lt;p&gt;登录你的Github帐号，新建仓库，名为&lt;code&gt;用户名.github.io&lt;/code&gt;固定写法，如&lt;code&gt;gonghonglou.github.io&lt;/code&gt;即下图中&lt;code&gt;1&lt;/code&gt;所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/firstblog%2FgithubName.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;本地的&lt;code&gt;blog&lt;/code&gt;文件夹下内容为：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;_config.yml    
db.json 
node_modules 
package.json
scaffolds
source
themes
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;终端cd到&lt;code&gt;blog&lt;/code&gt;文件夹下，&lt;code&gt;vim&lt;/code&gt;打开&lt;code&gt;_config.yml&lt;/code&gt;，命令如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ vim _config.yml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;打开后往下滑到最后，修改成下边的样子：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;deploy:
    type: git
    repository: https://github.com/gonghonglou/gonghonglou.github.io.git
    branch: master       
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;你需要将&lt;code&gt;repository&lt;/code&gt;后&lt;code&gt;gonghonglou&lt;/code&gt;换成你自己的用户名，地址在上图&lt;code&gt;2&lt;/code&gt;位置获取。hexo 3.1.1版本后&lt;code&gt;type:&lt;/code&gt;值为&lt;code&gt;git&lt;/code&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意坑二：在配置所有的&lt;code&gt;_config.yml&lt;/code&gt;文件时（包括theme中的），在所有的冒号&lt;code&gt;:&lt;/code&gt;后边都要加一个空格，否则执行hexo命令会报错，切记 切记&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在&lt;code&gt;blog&lt;/code&gt;文件夹目录下执行生成静态页面命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ hexo generate        或者：hexo g  
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;此时若出现如下报错：
ERROR Local hexo not found in ~/blog
ERROR Try runing: &#39;npm install hexo --save&#39;

则执行命令：
npm install hexo --save

若无报错，自行忽略此步骤。&lt;/pre&gt;

&lt;p&gt;再执行配置命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ hexo deploy            或者：hexo d
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;注意坑三：若执行命令&lt;code&gt;hexo deploy&lt;/code&gt;仍然报错：无法连接git或找不到git，则执行如下命令来安装&lt;a href=&quot;https://github.com/hexojs/hexo-deployer-git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;hexo-deployer-git&lt;/a&gt;：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ npm install hexo-deployer-git --save        
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;再次执行&lt;code&gt;hexo generate&lt;/code&gt;和&lt;code&gt;hexo deploy&lt;/code&gt;命令。&lt;/p&gt;
&lt;p&gt;若你未关联Github，则执行&lt;code&gt;hexo deploy&lt;/code&gt;命令时终端会提示你输入Github的用户名和密码，即&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Username for &amp;apos;https://github.com&amp;apos;:
Password for &amp;apos;https://github.com&amp;apos;:
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;hexo deploy&lt;/code&gt;命令执行成功后，浏览器中打开网址&lt;a href=&quot;http://gonghonglou.github.io&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://gonghonglou.github.io&lt;/a&gt;（将&lt;code&gt;gonghonglou&lt;/code&gt;换成你的用户名）能看到和打开&lt;code&gt;http://localhost:4000&lt;/code&gt;时一样的页面。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;为避免每次输入Github用户名和密码的麻烦，可参照第二节方法&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;3.2&quot;&gt;2.添加ssh key到Github&lt;/h3&gt;

&lt;h4 id=&quot;3.2.1&quot;&gt;1.1.检查SSH keys是否存在Github&lt;/h4&gt;

&lt;p&gt;执行如下命令，检查SSH keys是否存在。如果有文件&lt;code&gt;id_rsa.pub&lt;/code&gt;或&lt;code&gt;id_dsa.pub&lt;/code&gt;，则直接进入步骤1.3将SSH key添加到Github中，否则进入下一步生成SSH key。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ ls -al ~/.ssh
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;3.2.2&quot;&gt;1.2.生成新的ssh key&lt;/h4&gt;

&lt;p&gt;执行如下命令生成public/private rsa key pair，注意将&lt;code&gt;your_email@example.com&lt;/code&gt;换成你自己注册Github的邮箱地址。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ ssh-keygen -t rsa -C &amp;quot;your_email@example.com&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;默认会在相应路径下（&lt;code&gt;~/.ssh/id_rsa.pub&lt;/code&gt;）生成&lt;code&gt;id_rsa&lt;/code&gt;和&lt;code&gt;id_rsa.pub&lt;/code&gt;两个文件。&lt;/p&gt;
&lt;h4 id=&quot;3.2.2&quot;&gt;1.3.将ssh key添加到Github中&lt;/h4&gt;

&lt;p&gt;Find前往文件夹&lt;code&gt;~/.ssh/id_rsa.pub&lt;/code&gt;打开id_rsa.pub文件，里面的信息即为SSH key，将这些信息复制到Github的Add SSH key页面即可。&lt;/p&gt;
&lt;p&gt;进入Github –&amp;gt; Settings –&amp;gt; SSH keys –&amp;gt; add SSH key:&lt;/p&gt;
&lt;p&gt;Title里任意添一个标题，将复制的内容粘贴到Key里，点击下方&lt;code&gt;Add key&lt;/code&gt;绿色按钮即可。&lt;/p&gt;
&lt;h3 id=&quot;3.3&quot;&gt;3.发布文章&lt;/h3&gt;

&lt;p&gt;终端cd到&lt;code&gt;blog&lt;/code&gt;文件夹下，执行如下命令新建文章：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hexo new &amp;quot;postName&amp;quot;    
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;名为&lt;code&gt;postName.md&lt;/code&gt;的文件会建在目录&lt;code&gt;/blog/source/_posts&lt;/code&gt;下，&lt;code&gt;postName&lt;/code&gt;是文件名，为方便链接不建议掺杂汉字。你当然可以用vim来编辑文章。我在用Mou编辑器，支持预览，虽然其预览主题并非我喜欢，如果你有好用的markdown编辑器请推荐给我，感激不尽！&lt;/p&gt;
&lt;p&gt;文章编辑完成后，终端cd到&lt;code&gt;blog&lt;/code&gt;文件夹下，执行如下命令来发布：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hexo generate             //生成静态页面
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;hexo deploy            //将文章部署到Github&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;至此，Mac上搭建基于Github的Hexo博客就完成了。下面的内容是介绍安装theme和绑定个人域名，如果有兴趣且还有耐心的话，请继续吧。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;4&quot;&gt;安装theme&lt;/h2&gt;

&lt;p&gt;你可以到&lt;a href=&quot;https://hexo.io/themes/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo官网主题页&lt;/a&gt;去搜寻自己喜欢的theme。这里以&lt;a href=&quot;https://github.com/iissnan/hexo-theme-next&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;hexo-theme-next&lt;/a&gt;为例&lt;/p&gt;
&lt;p&gt;终端cd到 &lt;code&gt;blog&lt;/code&gt; 目录下执行如下命令：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ git clone https://github.com/iissnan/hexo-theme-next themes/next
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;将&lt;code&gt;blog&lt;/code&gt;目录下&lt;code&gt;_config.yml&lt;/code&gt;里&lt;code&gt;theme&lt;/code&gt;的名称&lt;code&gt;landscape&lt;/code&gt;修改为&lt;code&gt;next&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;终端cd到&lt;code&gt;blog&lt;/code&gt;目录下执行如下命令(每次部署文章的步骤)：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ hexo clean           //清除缓存文件 (db.json) 和已生成的静态文件 (public)
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;$ hexo g             //生成缓存和静态文件&lt;/pre&gt;

&lt;pre&gt;$ hexo d             //重新部署到服务器&lt;/pre&gt;

&lt;p&gt;至于更改theme内容比如名称、描述、头像等去修改&lt;code&gt;blog/_config.yml&lt;/code&gt;文件和&lt;code&gt;blog/themes/next/_config.yml&lt;/code&gt;文件中对应的属性名称即可， 不要忘记冒号&lt;code&gt;:&lt;/code&gt;后加空格。  &lt;a href=&quot;http://theme-next.iissnan.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt; NexT 使用文档&lt;/a&gt;里有极详细的介绍。&lt;/p&gt;
&lt;h2 id=&quot;5&quot;&gt;绑定个人域名&lt;/h2&gt;

&lt;p&gt;现在使用的域名是Github提供的二级域名，也可以绑定为自己的个性域名。购买域名，可以到&lt;a href=&quot;https://sg.godaddy.com/zh/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GoDaddy官网&lt;/a&gt;，网友亲切称呼为：狗爹，也可以到&lt;a href=&quot;http://wanwang.aliyun.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;阿里万网&lt;/a&gt;购买。我是在万网买的，可直接在其网站做域名解析。&lt;/p&gt;
&lt;h3 id=&quot;5.1&quot;&gt;1.Github端&lt;/h3&gt;

&lt;p&gt;在&lt;code&gt;/blog/themes/next/source&lt;/code&gt;目录下新建文件名为：&lt;code&gt;CNAME&lt;/code&gt;文件，注意没有后缀名！直接将自己的域名如：&lt;code&gt;gonghonglou.com&lt;/code&gt;写入。&lt;/p&gt;
&lt;p&gt;终端cd到&lt;code&gt;blog&lt;/code&gt;目录下执行如下命令重新部署：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ hexo clean
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;$ hexo g&lt;/pre&gt;

&lt;pre&gt;$ hexo d&lt;/pre&gt;

&lt;blockquote&gt;
&lt;p&gt;注意坑四：网上许多都是说在Github上直接新建&lt;code&gt;CNAME&lt;/code&gt;文件，如果这样的话，在你下一次执行&lt;code&gt;hexo d&lt;/code&gt;部署命令后&lt;code&gt;CNAME&lt;/code&gt;文件就消失了，因为本地没有此文件嘛。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;5.2&quot;&gt;2.域名解析&lt;/h3&gt;

&lt;p&gt;如果将域名指向一个域名，实现与被指向域名相同的访问效果，需要增加CNAME记录。登录万网，在你购买的域名后边点击：解析 –&amp;gt; 添加解析&lt;/p&gt;
&lt;p&gt;记录类型：CNAME&lt;/p&gt;
&lt;p&gt;主机记录：将域名解析为example.com（不带www），填写@或者不填写&lt;/p&gt;
&lt;p&gt;记录值：gonghonglou.github.io.    (不要忘记最后的&lt;code&gt;.&lt;/code&gt;，&lt;code&gt;gonghonglou&lt;/code&gt;改为你自己的用户名)，点击保存即可，如下图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xn9bi.com1.z0.glb.clouddn.com/firstblog%2Fyumingjiexi.png&quot; alt=&quot;域名解析&quot;&gt;&lt;/p&gt;
&lt;p&gt;此时，点击访问&lt;a href=&quot;http://gonghonglou.com&quot;&gt;http://gonghonglou.com&lt;/a&gt;和访问&lt;a href=&quot;http://gonghonglou.github.io&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://gonghonglou.github.io&lt;/a&gt;效果一致。&lt;/p&gt;
&lt;p&gt;大功告成！&lt;/p&gt;
&lt;h2 id=&quot;6&quot;&gt;后记&lt;/h2&gt;

&lt;p&gt;以上便是我搭建&lt;a href=&quot;http://gonghonglou.com&quot;&gt;与佳期个人博客(gonghonglou.com)&lt;/a&gt;的全过程，希望对大家有所帮助，欢迎吐槽～&lt;/p&gt;
&lt;p&gt;转载请保留原文地址：&lt;a href=&quot;http://gonghonglou.com/2016/02/03/firstblog&quot;&gt;http://gonghonglou.com/2016/02/03/firstblog&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;7&quot;&gt;参考链接&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://hexo.io/docs&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo官网&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://leopardpan.github.io/2015/08/12/hexo/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;HEXO&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.jianshu.com/p/31cbbbc5f9fa/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;如何生成SSH key&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;文章更新于：2016-03-07&lt;/strong&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;这是一篇详细文章来讲述用Mac搭建Hexo博客于Github上的完整历程， 也是踩了无数的坑搭起来的，现在写下些经验来分享，希望能帮大家少踩些坑。&lt;/p&gt;
&lt;p&gt;曾买过一款阿里的云虚拟主机，后来才发现不能自己装软件只能上传网站程序，除非另买&lt;a href=&quot;https://
    
    </summary>
    
      <category term="Technology" scheme="http://gonghonglou.com/categories/Technology/"/>
    
    
  </entry>
  
</feed>
